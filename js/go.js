var main,color,globalx,globaly,globaltile,initlist=json;function byond(){url="?src="+srcRef,currentIsKey=!0;for(var e=0;e<arguments.length;e++)currentIsKey?url+=";":url+="=",url+=arguments[e],currentIsKey=!currentIsKey;console.log(url);const t=new XMLHttpRequest;t.open("GET",url),t.send()}removepiece=function(e){for(var t=document.getElementsByTagName("img"),o=0;o<t.length;o++)if(t[o].dataset.loc&&t[o].dataset.loc==e){t[o].parentElement.removeChild(t[o]);break}};var piececlick=function(e){e.preventDefault();e=e.srcElement;e.parentElement.removeChild(e),byond("command","remove","position",e.dataset.loc,"color",e.dataset.color)};createpiece=function(e,t,o,n,l,a){"secondary"==(l=null==l?"primary":l)&&(e=(c=(n=document.getElementById(a)).coords.split(","))[0],t=c[1]);var c=document.createElement("img");c.src="white"==o?"https://cdn.goonhub.com/images/go/gowhite.png?v=1":"https://cdn.goonhub.com/images/go/goblack.png?v=1",c.style.position="absolute",c.style.left=e+"px",c.style.top=t+"px",c.dataset.loc=n.id,c.dataset.color=o,c.dataset.offsetx=n.dataset.offsetx,c.dataset.offsety=n.dataset.offsety,c.onclick=piececlick,main.appendChild(c),"secondary"!=l&&byond("command","piecelog","offsetx",c.dataset.offsetx,"offsety",c.dataset.offsety,"position",n.id,"color",o)},checkhand=function(e){createpiece(globalx,globaly,e,globaltile),globatile=globaly=globalx=null};var gridclick=function(e){e.preventDefault();var t=e.srcElement.coords.split(",");globalx=t[0],globaly=t[1],globaltile=e.srcElement,byond("command","checkhand")};function windowclose(){byond("command","close")}window.onload=function(e){document.body.scroll="no";var t=document.getElementById("map");main=document.getElementById("main");for(var o=-10,n=30,l=31,a=71,c=0,i=13,r=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N"),s=0;s<169;s++){var d=document.createElement("area");if(d.shape="rect",13==i&&0!=c){o=-10,n=30,l=31;for(var a=71,m=0;m<c;m++)l+=41,a+=41}o+=41,n+=41,d.coords=o+","+l+","+n+","+a,d.id=r[c]+i,d.dataset.offsetx=2*(i-1),d.dataset.offsety=2*c,d.href="https://google.com",d.onclick=gridclick,t.appendChild(d),1==i?(i=13,c++):i--}if(initlist&&initlist.length)for(s=0;s<initlist.length;s++){var f=document.getElementById(initlist[s].position),g=f.coords.split(","),o=g[0],l=g[1];createpiece(o,l,initlist[s].color,f)}},window.onbeforeunload=windowclose;