var main,color,globalx,globaly,globaltile,initlist=json;function byond(){url="?src="+srcRef,currentIsKey=!0;for(var e=0;e<arguments.length;e++)currentIsKey?url+=";":url+="=",url+=arguments[e],currentIsKey=!currentIsKey;console.log(url);const t=new XMLHttpRequest;t.open("GET",url),t.send()}removepiece=function(e){for(var t=document.getElementsByTagName("img"),o=0;o<t.length;o++)if(t[o].dataset.loc&&t[o].dataset.loc==e){t[o].parentElement.removeChild(t[o]);break}};var piececlick=function(e){e.preventDefault();e=e.srcElement;e.parentElement.removeChild(e),byond("command","remove","position",e.dataset.loc,"color",e.dataset.color)};createpiece=function(e,t,o,l,n,a){"secondary"==(n=null==n?"primary":n)&&(e=(i=(l=document.getElementById(a)).coords.split(","))[0],t=i[1]);var i=document.createElement("img");i.src="white"==o?"https://stonepillars.github.io/images/go/gowhite.png?v=1":"https://stonepillars.github.io/images/go/goblack.png?v=1",i.style.position="absolute",i.style.left=e+"px",i.style.top=t+"px",i.dataset.loc=l.id,i.dataset.color=o,i.dataset.offsetx=l.dataset.offsetx,i.dataset.offsety=l.dataset.offsety,i.onclick=piececlick,main.appendChild(i),"secondary"!=n&&byond("command","piecelog","offsetx",i.dataset.offsetx,"offsety",i.dataset.offsety,"position",l.id,"color",o)},checkhand=function(e){createpiece(globalx,globaly,e,globaltile),globatile=globaly=globalx=null};var gridclick=function(e){e.preventDefault();var t=e.srcElement.coords.split(",");globalx=t[0],globaly=t[1],globaltile=e.srcElement,byond("command","checkhand")};function windowclose(){byond("command","close")}window.onload=function(e){document.body.scroll="no";var t=document.getElementById("map");main=document.getElementById("main");for(var o=-10,l=30,n=31,a=71,i=0,c=13,s=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N"),r=0;r<169;r++){var d=document.createElement("area");if(d.shape="rect",13==c&&0!=i){o=-10,l=30,n=31;for(var a=71,m=0;m<i;m++)n+=41,a+=41}o+=41,l+=41,d.coords=o+","+n+","+l+","+a,d.id=s[i]+c,d.dataset.offsetx=2*(c-1),d.dataset.offsety=2*i,d.href="https://google.com",d.onclick=gridclick,t.appendChild(d),1==c?(c=13,i++):c--}if(initlist&&initlist.length)for(r=0;r<initlist.length;r++){var f=document.getElementById(initlist[r].position),g=f.coords.split(","),o=g[0],n=g[1];createpiece(o,n,initlist[r].color,f)}},window.onbeforeunload=windowclose;