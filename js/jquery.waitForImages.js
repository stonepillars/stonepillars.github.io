!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(l){var e,m="waitForImages",p=(e=new Image).srcset&&e.sizes;l.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},l.expr[":"]["has-src"]=function(e){return l(e).is('img[src][src!=""]')},l.expr[":"].uncached=function(e){return!!l(e).is(":has-src")&&!e.complete},l.fn.waitForImages=function(){var i,n,a,r,c=0,o=l.Deferred(),u=this,h=[],s=l.waitForImages.hasImageProperties||[],t=l.waitForImages.hasImageAttributes||[],f=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(l.isPlainObject(arguments[0])?(r=arguments[0].waitForAll,a=arguments[0].each,n=arguments[0].finished):r=1===arguments.length&&"boolean"===l.type(arguments[0])?arguments[0]:(n=arguments[0],a=arguments[1],arguments[2]),n=n||l.noop,a=a||l.noop,r=!!r,!l.isFunction(n)||!l.isFunction(a))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var e=l(this);r?e.find("*").addBack().each(function(){var i=l(this);i.is("img:has-src")&&!i.is("[srcset]")&&h.push({src:i.attr("src"),element:i[0]}),l.each(s,function(e,r){var s,t=i.css(r);if(!t)return!0;for(;s=f.exec(t);)h.push({src:s[2],element:i[0]})}),l.each(t,function(e,r){return!i.attr(r)||void h.push({src:i.attr("src"),srcset:i.attr("srcset"),element:i[0]})})}):e.find("img:has-src").each(function(){h.push({src:this.src,element:this})})}),i=h.length,(c=0)===i&&(n.call(u),o.resolveWith(u)),l.each(h,function(e,s){var r=new Image,t="load."+m+" error."+m;l(r).one(t,function e(r){r=[c,i,"load"==r.type];if(c++,a.apply(s.element,r),o.notifyWith(s.element,r),l(this).off(t,e),c==i)return n.call(u[0]),o.resolveWith(u[0]),!1}),p&&s.srcset&&(r.srcset=s.srcset,r.sizes=s.sizes),r.src=s.src}),o.promise()}});