(function(c,T,k){"use strict";function e(e,t){t&&t.onError&&!1===t.onError(e)||(this.name="JsRender Error",this.message=e||"JsRender error")}function j(e,t){for(var n in e=e||{},t)e[n]=t[n];return e}function t(e,t,n){return J.rTag&&!e||(P=e?e.charAt(0):P,q=e?e.charAt(1):q,O=t?t.charAt(0):O,D=t?t.charAt(1):D,e="\\"+P+"(\\"+(a=n||a)+")?\\"+q,t="\\"+O+"\\"+D,i="(?:(?:(\\w+(?=[\\/\\s\\"+O+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+O+"]|\\"+O+"(?!\\"+D+"))*?)",J.rTag=i+")",i=new RegExp(e+i+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),g=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[P,q,O,D,a]}function d(e,t){t||(t=e,e=k);var n,r,i,a,l=this,o=!t||"root"===t;if(e){if(!(a=l.type===t?l:k))if(n=l.views,l._.useKey){for(r in n)if(a=n[r].get(e,t))break}else for(r=0,i=n.length;!a&&r<i;r++)a=n[r].get(e,t)}else if(o)for(;l.parent.parent;)a=l=l.parent;else for(;l&&!a;)a=l.type===t?l:k,l=l.parent;return a}function p(){var e=this.get("item");return e?e.index:k}function f(e,t){var n,r=this,i=t&&t[e]||(r.ctx||{})[e];return(i=i===k?r.getRsc("helpers",e):i)&&"function"==typeof i&&j(n=function(){return i.apply(r,arguments)},i),n||i}function u(e,t){for(var n=this,r=K[e],i=r&&r[t];i===k&&n;)i=(r=n.tmpl[e])&&r[t],n=n.parent;return i}function x(e,t,n,r,i,a,l,o){var s="array"===t,o={key:0,useKey:s?0:1,id:""+m++,onRender:o,bnds:{}},i={data:r,tmpl:i,content:l,views:s?[]:{},parent:n,ctx:e,type:t,get:d,getIndex:p,getRsc:u,hlp:f,_:o,_is:"view"};return n&&(l=n.views,(t=n._).useKey?(l[o.key="_"+t.useKey++]=i,t=t.tag,o.bnd=s&&(!t||!!t._.bnd&&t)):l.splice(o.key=i.index=a!==k?a:l.length,0,i),i.ctx=e||n.ctx),i}function R(e,t){var n,r=X.wrapMap||{},i=j({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:A},t);return t.htmlTag||(n=s.exec(e),i.htmlTag=n?n[1].toLowerCase():""),(n=r[i.htmlTag])&&n!==r.div&&(i.markup=y.trim(i.markup)),i}function A(e,t,n,r,i,a){var l,o,s,d,c,p,f,u,g,h,v,_=this,m=!_.attr||"html"===_.attr,b="";if(!0===r&&(p=!0,r=0),_.tag?(g=(_=(f=_).tag)._,h=_.tagName,v=f.tmpl,t=I(t,_.ctx),u=f.content,!1===f.props.link&&((t=t||{}).link=!1),n=n||f.view,e=e===k?n:e):v=_.jquery&&(_[0]||E('Unknown template: "'+_.selector+'"'))||_,v&&((n=!n&&e&&"view"===e._is?e:n)&&(u=u||n.content,a=a||n._.onRender,e===n&&(e=n.data,i=!0),t=I(t,n.ctx)),n&&n.data!==k||((t=t||{}).root=e),v=!v.fn?Q[v]||Q(v):v)){if(!0===(m=a=!1!==(t&&t.link)&&m&&a)&&(m=k,a=n._.onRender),y.isArray(e)&&!i)for(s=p?n:r!==k&&n||x(t,"array",n,e,v,r,u,a),l=0,o=e.length;l<o;l++)d=x(t,"item",s,c=e[l],v,(r||0)+l,u,a),c=v.fn(c,d,K),b+=s._.onRender?s._.onRender(c,d):c;else s=p?n:x(t,h||"data",n,e,v,r,u,a),g&&!_.flow&&(s.tag=_),b+=v.fn(e,s,K);return m?m(b,s):b}return""}function E(e){throw new K.sub.Error(e)}function L(e){E("Syntax error\n"+e)}function V(g,h,v,_){function m(e){(e-=C)&&k.push(g.substr(C,e).replace(U,"\\n"))}function b(e){e&&L('Unmatched or missing tag: "{{/'+e+'}}" in template:\n'+g)}var x,y=h&&h.allowCode,e=[],C=0,w=[],k=e,j=[,,,e];return g=g.replace(o,"\\$&"),b(w[0]&&w[0][3].pop()[0]),g.replace(i,function(e,t,n,r,i,a,l,o,s,d,c,p){a&&(i=":",r="html");var a=t&&[],t="",f="",u="",l=!(d=d||v)&&!i&&!l;n=n||i,m(p),C=p+e.length,o?y&&k.push(["*","\n"+s.replace(N,"$1")+"\n"]):n?("else"===n&&(S.test(s)&&L('for "{{else if expr}}" use "{{else expr}}"'),a=j[6],j[7]=g.substring(j[7],p),j=w.pop(),k=j[3],l=!0),s&&(t=$(s=s.replace(U," "),a,h).replace(B,function(e,t,n){return t?u+=n+",":f+=n+",",""})),f=f.slice(0,-1),t=t.slice(0,-1),o=f&&f.indexOf("noerror:true")+1&&f||"",x=[n,r||!!_||"",t,l&&[],'params:"'+s+'",props:{'+f+"}"+(u?",ctx:{"+u.slice(0,-1)+"}":""),o,a||0],k.push(x),l&&(w.push(j),(j=x)[7]=C)):c&&(b(c!==(l=j[0])&&"else"!==l&&c),j[7]=g.substring(j[7],p),j=w.pop()),b(!j&&c),k=j[3]}),m(g.length),(C=e[e.length-1])&&b(""+C!==C&&+C[7]===C[7]&&C[0]),function e(t,n,r){var i,a,l,o,s,d,c,p,f,u,g,h,v,_,m,b,x,y,C,w,k,j,A,E=0,I="",N="",B={},S=t.length;for(""+n===n?(_=r?'data-link="'+n.replace(U," ").slice(1,-1)+'"':n,n=0):(_=n.tmplName||"unnamed",n.allowCode&&(B.allowCode=!0),n.debug&&(B.debug=!0),g=n.bnds,v=n.tmpls),i=0;i<S;i++)if(j=t[i],""+j===j)I+='\nret+="'+j+'";';else if(a=j[0],"*"===a)I+=""+j[1];else{if(l=j[1],o=j[2],b=j[3],s=j[4],N=j[5],x=j[7],(w="else"===a)||(E=0,g&&(h=j[6])&&(E=g.push(h))),(k=":"===a)?(l&&(a="html"===l?">":l+a),N&&(N="try{var "+(j="prm"+i)+"=["+o+"][0];}catch(e){"+j+'="";}\n',o=j)):(b&&((y=R(x,B)).tmplName=_+"/"+a,e(b,y),v.push(y)),w||(m=a,C=I,I=""),y=(y=t[i+1])&&"else"===y[0]),s+=",args:["+o+"]}",k&&h||l&&">"!==a){if((A=new Function("data,view,j,u"," // "+_+" "+E+" "+a+"\n"+N+"return {"+s+";")).paths=h,A._ctxs=a,r)return A;u=1}if(I+=k?"\n"+(h?"":N)+(r?"return ":"ret+=")+(u?(f=!(u=0),'c("'+l+'",view,'+(h?(g[E-1]=A,E):"{"+s)+");"):">"===a?(c=!0,"h("+o+");"):(p=!0,"(v="+o+")!="+(r?"=":"")+'u?v:"";')):(d=!0,"{view:view,tmpl:"+(b?v.length:"0")+","+s+","),m&&!y){if(I="["+I.slice(0,-1)+"]",(r||h)&&(I=new Function("data,view,j,u"," // "+_+" "+E+" "+m+"\nreturn "+I+";"),h&&((g[E-1]=I).paths=h),I._ctxs=a,r))return I;I=C+'\nret+=t("'+m+'",view,this,'+(E||I)+");",m=h=0}}I="// "+_+"\nvar j=j||"+(T?"jQuery.":"js")+"views"+(p?",v":"")+(d?",t=j._tag":"")+(f?",c=j._cnvt":"")+(c?",h=j.converters.html":"")+(r?";\n":',ret="";\n')+(X.tryCatch?"try{\n":"")+(B.debug?"debugger;":"")+I+(r?"\n":"\nreturn ret;\n")+(X.tryCatch?"\n}catch(e){return j._err(e);}":"");try{I=new Function("data,view,j,u",I)}catch(e){L("Compiled template code:\n\n"+I)}return n&&(n.fn=I),I}(e,v?g:h,v)}function $(x,y,C){var w,k,j,A=C.links,E={},I={0:-1},N=0,B=!1,S=!1;return(x+" ").replace(l,function(e,t,n,r,s,i,a,l,o,d,c,p,f,u,g,h,v,_,m,b){if(i=i||"",n=n||t||p,s=s||o,d=d||v||"",!a)return!y||!h||S||B||w&&!j&&!k||(a=I[N],b.length-2>m-a&&(a=b.slice(a,m+1),(h=A[h=q+":"+a+O]=A[h]||V(P+h+D,C,!0)).paths||$(a,h.paths=[],C),(k||y).push({_jsvOb:h}))),S?(S=!f)?e:'"':B?(B=!u)?e:'"':(n?(I[++N]=m++,n):"")+(_?N?"":w?(w=j=k=!1,"\b"):",":l?(N&&L(x),j=r,"\b"+(w=s)+":"):s?s.split("^").join(".").replace(M,function(e,t,n,r,i,a,l,o){if(n&&(y&&("linkTo"===w&&(k=y._jsvto=y._jsvto||[]).push(s),w&&!j||y.push(s.slice(t.length))),"."!==n)){n=(r?'view.hlp("'+r+'")':i?"view":"data")+(o?(a?"."+a:r||i?"":"."+n)+(l||""):(o=r?"":i?a||"":n,""));return t+("view.data"===(n+=o?"."+o:"").slice(0,9)?n.slice(5):n)}return e})+(d?(E[++N]=!0,"."!==s.charAt(0)&&(I[N]=m),d):i):i||(g?(E[N--]=!1,g+(d?(E[++N]=!0,d):"")):c?(E[N]||L(x),","):t?"":(S=f,B=u,'"')));L(x)})}function I(e,t){return e&&e!==t?t?j(j({},t),e):e:t&&j({},t)}function n(e){return b[e]||(b[e]="&#"+e.charCodeAt(0)+";")}if(!(T&&T.views||c.jsviews)){var y,r,i,g,P="{",q="{",O="}",D="}",a="^",M=/^(?:null|true|false|\d[\d.]*|(!*?)([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,l=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^)|[)\]])([([]?))|(\s+)/g,U=/[ \t]*(\r\n|\n|\r)/g,N=/\\(['"])/g,o=/['"\\]/g,B=/\x08(~)?([^\x08]+)\x08/g,S=/^if\s/,s=/<(\w+)[>\s]/,h=/[\x00`><"'&]/g,v=h,_=0,m=0,b={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},C="data-jsv-tmpl",w={},F={template:{compile:function t(n,e,r,i,a,l){function o(e){if(""+e===e||0<e.nodeType){try{s=0<e.nodeType?e:!g.test(e)&&T&&T(c.document).find(e)[0]}catch(e){}return s&&(e=s.getAttribute(C),n=n||e,(e=Q[e])||(n=n||"_"+_++,s.setAttribute(C,n),e=Q[n]=t(n,s.innerHTML,r,i,a,l))),e}}var s,d=o(e=e||"");return(l=l||(e.markup?e:{})).tmplName=n,r&&(l._parentTmpl=r),(d=!d&&e.markup&&(d=o(e.markup))&&d.fn&&(d.debug!==e.debug||d.allowCode!==e.allowCode)?d.markup:d)!==k?(n&&!r&&(w[n]=function(){return e.render.apply(e,arguments)}),d.fn||e.fn?d.fn&&(e=n&&n!==d.tmplName?I(l,d):d):V(d,e=R(d,l)),function(e){var t,n,r,i,a;for(t in F)if(i=F[t],(a=i.compile)&&(n=e[t+"s"]))for(r in n)n[r]=a(r,n[r],e,t,i)}(l),e):void 0}},tag:{compile:function(e,t,n){var r;return"function"==typeof t?t={depends:t.depends,render:t}:((r=t.template)&&(t.template=""+r===r?Q[r]||Q(r):r),!1!==t.init&&(((r=t._ctr=function(){}).prototype=t).constructor=r)),n&&(t._parentTmpl=n),t}},helper:{},converter:{}},K={jsviews:"v1.0.0-beta",render:w,settings:{delimiters:t,debugMode:!0,tryCatch:!0},sub:{View:x,Error:e,tmplFn:V,parse:$,extend:j,error:E,syntaxError:L},_cnvt:function(e,t,n){var r,i,a=+n===n&&n,l=t.linkCtx,o=(n=a?(a=t.tmpl.bnds[a-1])(t.data,t,K):n).args[0];return(e||a)&&(i=l&&l.tag||{_:{inline:!l,bnd:a},tagName:e+":",flow:!0,_is:"tag"},l&&((l.tag=i).linkCtx=i.linkCtx||l,n.ctx=I(n.ctx,l.view.ctx)),(i.tagCtx=n).view=t,i.ctx=n.ctx||{},delete n.ctx,t._.tag=i,(e="true"!==e&&e)&&((r=t.getRsc("converters",e))||E("Unknown converter: {{"+e+":"))&&(i.depends=r.depends,o=r.apply(i,n.args)),o=a&&t._.onRender?t._.onRender(o,t,a):o,t._.tag=k),o},_tag:function(e,t,n,r,i){var a,l,o,s,d,c,p,f,u,g,h,v,_,m="",b=+r===r&&r,x=t.linkCtx||0,y=t.ctx,C=n||t.tmpl,w=t._;for("tag"===e._is&&(e=(l=e).tagName),c=(r=b?(h=C.bnds[b-1])(t.data,t,K):r).length,l=l||x.tag,d=0;d<c;d++)g=(f=r[d]).tmpl,g=f.content=g&&C.tmpls[g-1],n=f.props.tmpl,d||n&&l||(v=t.getRsc("tags",e)||E("Unknown tag: {{"+e+"}}")),j(f,{tmpl:n=""+(n=n||(l||v).template||g)===n?t.getRsc("templates",n)||Q(n):n,render:A,index:d,view:t,ctx:I(f.ctx,y)}),l||(v._ctr?(_=!!(l=new v._ctr).init,l.attr=l.attr||v.attr||k):l={render:v.render},l._={inline:!x},x&&(x.attr=l.attr=x.attr||l.attr,(x.tag=l).linkCtx=x),(l._.bnd=h||x.fn)?l._.arrVws={}:l.dataBoundOnly&&E("{^{"+e+"}} tag must be data-bound"),l.tagName=e,l.parent=s=y&&y.tag,l._is="tag",l._def=v),w.tag=l,(f.tag=l).tagCtxs=r,l.flow||(u=f.ctx=f.ctx||{},g=l.parents=u.parentTags=y&&I(u.parentTags,y.parentTags)||{},s&&(g[s.tagName]=s),u.tag=l);for(l.rendering={},d=0;d<c;d++)f=l.tagCtx=r[d],l.ctx=f.ctx,!d&&_&&(l.init(f,x,l.ctx),_=k),p=k,p=(p=(a=l.render)?a.apply(l,f.args):p)!==k?p:f.tmpl&&f.render()||(i?k:""),m=m?m+(p||""):p;return delete l.rendering,l.tagCtx=l.tagCtxs[0],l.ctx=l.tagCtx.ctx,l._.inline&&(o=l.attr)&&"html"!==o&&(m="text"===o?H.html(m):""),b&&t._.onRender?t._.onRender(m,t,b):m},_err:function(e){return X.debugMode?"Error: "+(e.message||e)+". ":""}};for(r in(e.prototype=new Error).constructor=e,p.depends=function(){return[this.get("item"),"index"]},F)!function(s,d){var c=s+"s";K[c]=function e(t,n,r){var i,a,l,o;if(!t||""+t===t||t.nodeType||t.markup)return n===k&&(n=t,t=k),t&&""+t!==t&&(r=n,n=t,t=k),o=r?r[c]=r[c]||{}:e,a=d.compile,(i=J.onBeforeStoreItem)&&(a=i(o,t,n,a)||a),t?null===n?delete o[t]:o[t]=a?n=a(t,n,r,s,d):n:n=a(k,n),a&&n&&(n._is=s),(i=J.onStoreItem)&&i(o,t,n,a),n;for(l in t)e(l,t[l],n);return K},F[s]=d}(r,F[r]);var Q=K.templates,H=K.converters,z=(K.helpers,K.tags),J=K.sub,X=K.settings;T?(y=T).fn.render=A:(y=c.jsviews={}).isArray=Array&&Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},y.render=w,y.views=K,y.templates=Q=K.templates,z({else:function(){},if:{render:function(e){var t=this;return t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render())},onUpdate:function(e,t,n){for(var r,i,a=0;(r=this.tagCtxs[a])&&r.args.length;a++)if(i=!(r=r.args[0])!=!n[a].args[0],r||i)return i;return!1},flow:!0},for:{render:function(e){var t=this.tagCtx,n=!arguments.length,r="",i=n||0;return this.rendering.done||(n?r=k:e!==k&&(r+=t.render(e),i+=y.isArray(e)?e.length:1),(this.rendering.done=i)&&(this.selected=t.index)),r},onArrayChange:function(e,t){var n,r=t.change;if(this.tagCtxs[1]&&("insert"===r&&e.target.length===t.items.length||"remove"===r&&!e.target.length||"refresh"===r&&!t.oldItems.length!=!e.target.length))this.refresh();else for(n in this._.arrVws)n=this._.arrVws[n],n.data===e.target&&n._.onArrayChange.apply(n,arguments);e.done=!0},flow:!0},include:{flow:!0},"*":{render:function(e){return e},flow:!0}}),H({html:function(e){return e!=k?String(e).replace(v,n):""},attr:function(e){return e!=k?String(e).replace(h,n):null===e?null:""},url:function(e){return e!=k?encodeURI(String(e)):null===e?null:""}}),t()}})(this,this.jQuery),function(E,I){"use strict";function e(e){return new(P(e)?n:t)(e)}function t(e){return this._data=e,this}function n(e){return this._data=e,this}function N(e){return P(e)?[e]:e}function B(e,t){var n,r;for(n in e){r=!0;break}r||delete M[t]}function S(e,t){var n,r;e.data&&e.data.off||(n=t.oldValue,r=e.data,e.type===D?(r.cb.array||r.cb)(e,t):r.prop!==t.path&&"*"!==r.prop||(typeof n===q&&(r.path||P(n))&&R(N(n),r.path,r.cb),typeof(n=t.value)===q&&(r.path||P(n))&&T(N(n),r.path,r.cb),r.cb(e,t)))}function T(){function r(e,t,n,r){var i=H(j),a=N(j);if(L=0,s||r)i&&(E(a).off(e,S),L&&delete L[E.data(j,"obId")]);else{if(u=i&&E._data(j))for(u=(u=u&&u.events)&&u[n?D:O],p=u&&u.length;p--;)if((f=u[p].data)&&f.cb===d){if(n)return;"*"===t&&f.prop!==t&&(E(j).off(e+"."+f.prop,S),L&&delete L[E.data(j,"obId")])}E(a).on(e,null,n?{cb:d}:{fullPath:o,path:t,prop:l,cb:d},S),v&&(v[E.data(j,"obId")||E.data(j,"obId",K++)]=j)}}function a(e,t){var n;d&&P(e)&&(n=j,j=e,r(D+".observe.obs"+d._bnd,I,!0,t),j=n)}var e,t,n,l,o,i,s,d,c,p,f,u,g,h,v,_,m,b=1,x=U,y=$.apply([],arguments),C=y.pop(),w=y.shift(),k=w,j=k,A=y.length;for(F(C)?d=C:(!0===C?s=C:C&&(w=C,b=0),C=y[A-1],(A&&C===I||F(C))&&(d=y.pop(),A--)),A&&F(y[A-1])&&(g=d,d=y.pop(),A--),x+=s?d?".obs"+d._bnd:"":".obs"+(c=d._bnd=d._bnd||Q++),s&&0===A&&k&&E(k).off(U,S),s||(v=M[c]=M[c]||{}),_=0,a(k,s),e=0;e<A;e++){if(o=y[e],j=k,""+o===o){if((n=o.split("^"))[1]&&(_=n[0].split(".").length,_=(o=n.join(".")).split(".").length-_),g&&(h=g(o,k))){A+=h.length-1,V.apply(y,[e--,1].concat(h));continue}n=o.split(".")}else b&&!F(o)&&(o._jsvOb&&(s||(o._cb=m=function(n,r){n._ob=g(n,w);var i=w;return function(){var e=n._ob,t=r.length;typeof e===q&&(a(e,!0),t&&R(N(e),r,d,g)),typeof(e=n._ob=g(n,i))===q&&(a(e),t&&T(N(e),r,d,g,i))}}(o,y.slice(e+1)),o._rt=w,m._bnd=d._bnd),T(o._rt,y.slice(0,e),o._cb,g,s),o=o._ob),j=o),n=[k=o];for(;j&&(l=n.shift())!==I;)if(typeof j===q){if(""+l===l){if(""===l)continue;if(n.length<_+1&&!j.nodeType){if(!s&&(u=H(j)&&E._data(j))){for(u=(u=u.events)&&u.propertyChange,p=u&&u.length;p--&&(!(f=u[p].data)||f.cb!==d||(f.prop!==l||f.path!==n.join("."))&&"*"!==f.prop););if(-1<p){j=j[l];continue}}if("*"===l){for(t in F(j)?(i=j.depends)&&T(i,d,s||w):r(x,""),j)a(j[t],s);break}l&&r(x+"."+l,n.join("."))}l=j[l]}if(F(l)){(i=l.depends)&&T(j,function e(t,n){for(var r,i=n,a=i,l=(t=P(t)?t:[t]).length,o=[],s=0;s<l;s++)r=t[s],F(r)?V.apply(o,[o.length,1].concat(e(r.call(n,n),n))):""+r===r?(a!==i&&o.push(i=a),o.push(r)):(n=a=r,a!==i&&o.push(i=a));return o}(i,j),d,g,s||N(w));break}j=l}a(j,s)}return c&&B(v,c),{cbId:c,bnd:v,leaf:j}}function R(){return[].push.call(arguments,!0),T.apply(this,arguments)}if(!E)throw"requires jQuery or JsRender";var L,r,i,a,V,$,P,s,q,l,O,D,M,U,F,K,Q,H;E.observable||(i=E.event.special,a=E.views?E.views.sub:{},V=[].splice,$=[].concat,P=E.isArray,s=E.expando,q="object",l=parseInt,O=a.propChng=a.propChng||"propertyChange",D=a.arrChng=a.arrChng||"arrayChange",M=a._cbBnds=a._cbBnds||{},U=O+".observe",F=E.isFunction,Q=K=1,H=E.hasData,(E.observable=e).Object=t,e.Array=n,e.observe=T,e.unobserve=R,t.prototype={_data:null,data:function(){return this._data},observe:function(e,t){return T(this._data,e,t)},unobserve:function(e,t){return R(this._data,e,t)},setProperty:function(e,t,n){var r,i,a,l=this,o=l._data;if(e=e||"",o)if(P(e))for(r=e.length;r--;)i=e[r],l.setProperty(i.name,i.value,n===I||n);else if(""+e!==e)for(r in e)l.setProperty(r,e[r],t);else if(e.indexOf(s)<0){for(a=e.split(".");o&&1<a.length;)o=o[a.shift()];l._setProperty(o,a.join("."),t,n)}return l},_setProperty:function(e,t,n,r){var i,a,l=t?e[t]:e;F(l)&&l.set&&(i=!0===(a=l).set?l:l.set,l=l.call(e)),(l!==n||r&&l!=n)&&(!(l instanceof Date)||n<l||l<n)&&(i?(i.call(e,n),n=a.call(e)):e[t]=n,this._trigger(e,{change:"prop",path:t,value:n,oldValue:l}))},_trigger:function(e,t){E(e).triggerHandler(O,t)}},n.prototype={_data:null,data:function(){return this._data},insert:function(e,t){var n=this._data;return 1===arguments.length&&(t=e,e=n.length),-1<(e=l(e))&&e<=n.length&&((t=P(t)?t:[t]).length&&this._insert(e,t)),this},_insert:function(e,t){var n=this._data,r=n.length;V.apply(n,[e,0].concat(t)),this._trigger({change:"insert",index:e,items:t},r)},remove:function(e,t){var n=this._data;return e===I&&(e=n.length-1),e=l(e),-1<(t=t?l(t):0===t?0:1)&&-1<e&&((t=(n=n.slice(e,e+t)).length)&&this._remove(e,t,n)),this},_remove:function(e,t,n){var r=this._data,i=r.length;r.splice(e,t),this._trigger({change:"remove",index:e,items:n},i)},move:function(e,t,n){var r;return n=n?l(n):0===n?0:1,e=l(e),t=l(t),0<n&&-1<e&&-1<t&&e!==t&&(n=(r=this._data.slice(e,e+n)).length)&&this._move(e,t,n,r),this},_move:function(e,t,n,r){var i=this._data,a=i.length;i.splice(e,n),i.splice.apply(i,[t,0].concat(r)),this._trigger({change:"move",oldIndex:e,index:t,items:r},a)},refresh:function(e){var t=this._data.slice(0);return this._refresh(t,e),this},_refresh:function(e,t){var n=this._data,r=n.length;V.apply(n,[0,n.length].concat(t)),this._trigger({change:"refresh",oldItems:e},r)},_trigger:function(e,t){var n=this._data,r=n.length,n=E([n]);n.triggerHandler(D,e),r!==t&&n.triggerHandler(O,{change:"prop",path:"length",value:r,oldValue:t})}},i[O]=i[D]={remove:function(e){(e=e.data)&&(e.off=1,e=e.cb)&&(L=M[r=e._bnd])},teardown:function(){L&&(delete L[E.data(this,"obId")],B(L,r))}})}(this.jQuery||this.jsviews),function(y,Z,ee){"use strict";function te(e){var t=this.linkedElem;t&&b({target:t[0],stopImmediatePropagation:Z.noop},e)}function b(e,t){var n,r,i,a,l,o,s,d,c,p,f,u=e.target,g=u._jsvBnd,h=/&(\d+)\+?/g;if(g)for(;o=h.exec(g);)(o=Pe[o[1]])&&(f=o.to)&&(l=(r=o.linkCtx).view,p=r.tag,a=Z(u),d=l.hlp($,r.ctx),c=l.hlp(P,r.ctx),s=_(u),o=U[s],t===ee&&(t=B(s)?s(u):o?a[o]():a.attr(s)),s=f[1],f=f[0],(i=s?B(s)?s:(i=l.tmpl.converters)&&i[s]||S[s]:i)&&(t=i.call(p,t)),s=l.linkCtx,l.linkCtx=r,d&&(n=!1===d.call(l,e,t))||p&&p.onBeforeChange&&(n=!1===p.onBeforeChange(e,t))||t===ee||(p&&p.onChange&&(t=p.onChange(t)),d=f[0],t!==ee&&d&&(d=d._jsvOb?d._ob:d,p&&(p._.chging=!0),T(d).setProperty(f[2]||f[1],t),p&&delete p._.chging,c&&c.call(r,e))),l.linkCtx=s,n&&e.stopImmediatePropagation())}function i(e,t,n){var r,i,a=this,l=a.data,o=a.elem,s=a.convert,d=o.parentNode,c=a.view,p=c.ctx,f=c.linkCtx,u=c.hlp($);if(c.linkCtx=a,c.ctx=a.ctx,d&&(!u||!t||!1!==u.call(a,e,t))&&(!t||"*"===e.data.prop||e.data.prop===t.path)){if(t&&(a.eventArgs=t),t||a._initVal){if(delete a._initVal,d=function(e,t,n,r){var i,a=n&&n.parentElem||t.elem,l=Z(a);if(e!==ee){if(n&&(r=n.attr||r),B(e)&&Ee(t.expr+": missing parens"),n=/^css-/.test(r="visible"===r?"css-display":r)&&r.slice(4))i=Z.style(a,n),+e===e&&(i=parseInt(i)),i=Z.style(a,n);else if("link"!==r){if("value"===r)a.type===O&&(i=l.prop(r=q));else if(r===D){if(a.value!==""+e)return r;i=l.prop(q)}e=U[r],i===ee&&(i=e?l[e]():l.attr(r))}t._val=i}return r}(r=n.call(c.tmpl,l,c,v),a,i=a.tag,a.attr||_(o,!0,s!==ee)),i){if(t&&i.onUpdate&&!1===i.onUpdate(e,t,r)||"none"===d)return i.tagCtxs=r=r[0]?r:[r],i.tagCtx=r[0],"html"===d&&i.onBeforeLink&&i.onBeforeLink(),ge(i,i.tagCtx),C(a,l,o),void(c.linkCtx=f);if(i._.chging)return;r=":"===i.tagName.slice(-1)?v._cnvt(i.tagName.slice(0,-1),c,r):v._tag(i,c,c.tmpl,r,!0)}else n._ctxs&&(r=(s=""===s?"true":s)?v._cnvt(s,c,r):v._tag(n._ctxs,c,c.tmpl,r,!0),i=c._.tag,d=a.attr||d);g(r,a,d,i)&&t&&(u=c.hlp(P))&&u.call(a,e,t)}i&&(i.contents=ce,i.nodes=pe,i.childTags=fe,i.currentCtxs=ue,i.update=te,i.refresh=he,ge(i,i.tagCtx)),C(a,l,o),c.linkCtx=f,c.ctx=p}}function g(e,t,n,r){var i,a,l,o,s,d,c,p,f=e!==ee,u=t.data,g=r&&r.parentElem||t.elem,h=Z(g),v=t.view,_=t._val,m=v.ctx,b=v.linkCtx,x=r||"html"===n;if(r&&(r.parentElem=r.parentElem||t.expr||r._elCnt?g:g.parentNode,i=r._prv,a=r._nxt),f){if(/^css-/.test(n))"css-display"===n&&(e=e?(s=g,c=y.getComputedStyle,"none"!==(p=(s.currentStyle||c.call(y,s,"")).display)||(p=Q[d=s.nodeName])||(s=be.createElement(d),be.body.appendChild(s),p=(c?c.call(y,s,""):s.currentStyle).display,Q[d]=p,be.body.removeChild(s)),p):"none"),(x=x||_!==e)&&Z.style(g,n.slice(4),e);else if("link"!==n){if(n===q)o=1,e=e&&"false"!==e;else if(n===D){if(g.value!==""+e)return void C(t,u,g);e=!0,o=1,n=q}else"selected"!==n&&"disabled"!==n&&"multiple"!==n&&"readlonly"!==n||(e=e&&"false"!==e?n:null);(p=U[n])?"html"===n?(v.linkCtx=t,v.ctx=t.ctx,r&&r._.inline?(l=r.nodes(!0),r._elCnt&&(i&&i!==a&&w(i,a,g,r._tgId,"^",!0),i=i?i.previousSibling:a?a.previousSibling:g.lastChild),Z(l).remove(),r&&r.onBeforeLink&&r.onBeforeLink(),l=v.link(v.data,g,i,a,e,r&&{tag:r._tgId,lazyLink:r.tagCtx.props.lazyLink})):(f&&h.empty(),r&&r.onBeforeLink&&r.onBeforeLink(),f&&(l=v.link(u,g,i,a,e,r&&{tag:r._tgId}))),v.linkCtx=b,v.ctx=m):(x=x||_!==e)&&("text"===n&&g.children&&!g.children[0]?g.textContent!==ee?g.textContent=e:g.innerText=null===e?"":e:h[p](e)):(x=x||_!==e)&&h[o?"prop":"attr"](n,e!==ee||o?e:null)}return r?l:x}"html"===n&&r&&r.onBeforeLink&&r.onBeforeLink()}function ne(e,t){var n=this,r=n.hlp($),i=n.hlp(P);if(!r||!1!==r.call(e,t)){if(t){var r=t.change,a=t.index,l=t.items;switch(r){case"insert":n.addViews(a,l);break;case"remove":n.removeViews(a,l.length);break;case"move":n.refresh();break;case"refresh":n.refresh()}}i&&i.call(this,e,t)}}function re(t){var e,n=t.data,r=t._.bnd;!t._.useKey&&r&&((e=t._.bndArr)&&(Z([e[1]]).off(L,e[0]),t._.bndArr=ee),r!==!!r&&r._.inline?n?r._.arrVws[t._.id]=t:delete r._.arrVws[t._.id]:n&&(r=function(e){e.data&&e.data.off||ne.apply(t,arguments)},Z([n]).on(L,r),t._.bndArr=[r,n]))}function _(e,t,n){var r=e.nodeName.toLowerCase(),i=xe.merge[r];return i?t?"input"===r&&e.type===D?D:i.to:i.from:t?n?"text":"html":""}function s(e,t,n,r,i,a,l){var o,s,d,c,p=e.parentElem,f=e._prv,u=e._nxt,g=e._elCnt;if(f&&f.parentNode!==p&&Ee("Missing parentNode"),l)for(c in d=e.nodes(),g&&f&&f!==u&&w(f,u,p,e._.id,"_",!0),e.removeViews(ee,ee,!0),o=u,g&&(f=f?f.previousSibling:u?u.previousSibling:p.lastChild),Z(d).remove(),e._.bnds)h(c);else{if(t){if(!(s=r[t-1]))return!1;f=s._nxt}g?f=(o=f)?o.previousSibling:p.lastChild:o=f.nextSibling}l=n.render(i,a,e,l||t,e._.useKey&&l,!0),e.link(i,p,f,o,l,s)}function ie(e,t,n){var r,i;return n?(i="^`",(r=(n=t._.tag||{_:{inline:!0,bnd:n},tagCtx:{view:t},flow:!0})._tgId)||((Pe[r=H++]=n)._tgId=""+r)):(i="_`",$e[r=t._.id]=t),"#"+r+i+(e===ee?"":e)+"/"+r+i}function C(e,t,n){var r,i,a=e.convertBack,l=e.tag,o=[],s=e._bndId||""+H++,d=e._hdlr;if(delete e._bndId,l&&(i=l.linkedElem,o=l.depends||o,o=B(o)?l.depends(l):o),!e._depends||""+e._depends!=""+o){if(e._depends&&c(t,e._depends,d,!0),(d=c(Z.isArray(t)?[t]:t,e.fn.paths||e.fn,o,d,e._ctxCb)).elem=n,d.linkCtx=e,d._tgId=s,n._jsvBnd=n._jsvBnd||"",n._jsvBnd+="&"+s,i)for(d.to=[[],a],r=i.length;r--;)i[r]._jsvBnd=n._jsvBnd+"+";e._depends=o,e.view._.bnds[s]=s,Pe[s]=d,!l||l.flow||l._.inline||(n.setAttribute(Ce,(n.getAttribute(Ce)||"")+"#"+s+"^/"+s+"^"),l._tgId=""+s),!i&&a===ee||u(d,a)}}function r(e,t,n,r,i,a){return l(this,e,t,n,r,i,a)}function l(e,t,n,r,i,a,l){if(e&&t){t=t.jquery?t:Z(t),x||(x=be.body,Z(x).on(V,b));for(var o,s,d,c,p,f,u,g,h,v=ie,_=r&&"replace"===r.target,m=t.length;m--;)if(u=t[m],""+e===e)g=(p=_e(u)).ctx,p.ctx=r,ae(e,u,_e(u),n),p.ctx=g;else{if(i=i||_e(u),e.markup!==ee)!1===i.link&&((r=r||{}).link=v=!1),_&&(f=u.parentNode),d=e.render(n,r,i,ee,ee,v),f?(a=u.previousSibling,l=u.nextSibling,Z.cleanData([u],!0),f.removeChild(u),u=f):(a=l=ee,Z(u).empty());else if(!0!==e)break;if(u._dfr&&!l){for(o=0,s=(c=oe(u._dfr,!0,J)).length;o<s;o++)p=c[o],(p=$e[p.id])&&p.data!==ee&&p.parent.removeViews(p._.key,ee,!0);u._dfr=""}h=i.data,g=i.ctx,i.data=n,i.ctx=r,i.link(n,u,a,l,d),i.data=h,i.ctx=g}}return t}function ae(e,t,n,r,i){var a,l,o,s,d,c,p,f,u,g,h,v;if(i)m(f=(u=(u=Pe[i]).linkCtx?u.linkCtx.tag:u).linkCtx||{data:r,elem:u._elCnt?u.parentElem:t,view:n,ctx:n.ctx,attr:"html",fn:u._.bnd,tag:u,_bndId:i},f.fn);else if(e&&t)for(a=n.tmpl,h=e,v=_(t),e=(h=Z.trim(h)).slice(-1)!==E?h=A+":"+h+(v?":":"")+E:h,k.lastIndex=0;p=k.exec(e);)g=k.lastIndex,l=i?"html":p[1],c=p[3],s=p[10],o=ee,f={data:r,elem:u&&u._elCnt?u.parentElem:t,view:n,ctx:n.ctx,attr:l,_initVal:!p[2]},p[6]&&(!l&&(o=/:([\w$]*)$/.exec(s))&&((o=o[1])!==ee&&(d=-o.length-1,c=c.slice(0,d-1)+E,s=s.slice(0,d))),null===o&&(o=ee),f.convert=p[5]||""),f.expr=l+c,(p=a.links[c])||(a.links[c]=p=N.tmplFn(j+c+I,a,!0,o),N.parse(s,p.paths=[],a)),f.fn=p,l||o===ee||(f.convertBack=o),m(f,p),k.lastIndex=g}function m(n,r){function e(e,t){i.call(n,e,t,r)}var a;n._ctxCb=(a=(a=n.view)||Z.view(),function(e,t){var n,r,i=[t];if(a&&e)return e._jsvOb?e._jsvOb.call(a.tmpl,t,a,v):"~"===e.charAt(0)?"~tag"===e.slice(0,4)&&(r=a.ctx,"."===e.charAt(4)&&(n=e.slice(5).split("."),r=r.tag),n)?r?[r,n.join("."),t]:[]:(e=e.slice(1).split("."),(t=a.hlp(e.shift()))&&(e.length&&i.unshift(e.join(".")),i.unshift(t)),t?i:[]):"#"===e.charAt(0)?"#data"===e?[]:[a,e.replace(z,""),t]:void 0}),n._hdlr=e,n.tag&&n.tag.onArrayChange&&(e.array=function(e,t){n.tag.onArrayChange(e,t)}),e(!0)}function le(e,t){var n;return e?(n=e.indexOf(t))+1?e.slice(0,n)+e.slice(n+t.length):e:""}function p(e){return e&&(""+e===e?e:"SCRIPT"===e.tagName?e.type.slice(3):1===e.nodeType&&e.getAttribute(Ce)||"")}function oe(e,t,n){var l,o=[];if(t=t?e:p(e))return o.elCnt=!e.type,l="@"===t.charAt(0)||!e.type,(o._tkns=t).replace(n||W,function(e,t,n,r,i,a){o.push({elCnt:l,id:r,ch:i,open:t,close:n,path:a,token:e})}),o}function se(e,t){e&&("jsv"===e.type?e.parentNode.removeChild(e):t&&""===e.getAttribute(we)&&e.removeAttribute(we))}function de(e,t){for(var n=e;t&&n&&1!==n.nodeType;)n=n.previousSibling;return n&&(1!==n.nodeType?((n=be.createElement("SCRIPT")).type="jsv",e.parentNode.insertBefore(n,e)):p(n)||n.getAttribute(we)||n.setAttribute(we,"")),n}function ce(e,t){e!==!!e&&(t=e,e=ee);var n,r=Z(this.nodes());return r[0]&&(n=t?r.filter(t):r,r=e&&t?n.add(r.find(t)):n),r}function pe(e,t,n){var r,i=this,a=i._elCnt,l=!t&&a,o=[];for(t=t||i._prv,n=n||i._nxt,r=l?t===i._nxt?i.parentElem.lastSibling:t:!1===i._.inline?t||i.linkCtx.elem.firstChild:t&&t.nextSibling;r&&(!n||r!==n);)(e||a||"SCRIPT"!==r.tagName)&&o.push(r),r=r.nextSibling;return o}function fe(e,t){e!==!!e&&(t=e,e=ee);var n=this,r=n.link?n:n.tagCtx.view,i=n._prv,a=n._elCnt,l=[];return i&&r.link(ee,n.parentElem,a?i.previousSibling:i,n._nxt,ee,{get:{tags:l,deep:e,name:t,id:a&&n._tgId}}),l}function ue(){var e=this.tagCtx.view;return this._.bnd.call(e.tmpl,e.data,e,v)}function ge(e,t){var n,r,i,a,l,o,s,d,c,p=t.view,f=e.linkCtx=e.linkCtx||{tag:e,data:p.data,view:p,ctx:p.ctx};if(e.onAfterLink&&e.onAfterLink(t,f),r=(e.targetTag||e).linkedElem,!e._.chging&&r&&(i=r[0])){if(a=i.type===D,l=(n=f.convert)?B(n)?n(t.args[0]):v._cnvt(n,p,t):t.args[0],i!==f.elem)for(d=r.length;d--;){if(c=(i=r[d])._jsvLnkdEl,e._.inline&&(!c||c!==e&&c.targetTag!==e))for(i._jsvLnkdEl=e,i._jsvBnd=(f.elem||e._prv)._jsvBnd,s=(o=i._jsvBnd.slice(1).split("&")).length;s--;)u(Pe[o[s]],f.convertBack);a&&(i[q]=l===i.value)}a||i.value===ee||l===ee||(i.type===O?i[q]=l&&"false"!==l:i.value=l)}}function u(e,t){var n,r,i,a,l=e.linkCtx,o=l.data,s=l.fn.paths;if(e){for(r=(s=(n=s._jsvto)?n:s).length;r&&""+(i=s[--r])!==i;);!i||l.tag&&!l.tag.tagCtx.args.length?e.to=[[],t]:(i=s[r]=i.split("^").join("."),e.to="."===i.charAt(0)?[[a=s[r-1],i.slice(1)],t]:[l._ctxCb(s[0])||[o,s[0]],t],n&&a&&(e.to[0][0]=l._ctxCb(a,o)))}}function he(e){var t,n=this,r=n.linkCtx,i=n.tagCtx.view;return n.disposed&&Ee("Removed tag"),(e=e===ee?v._tag(n,i,i.tmpl,n.currentCtxs?n.currentCtxs():n.tagCtxs,!0):e)+""===e&&(t=g(e,r,n._.inline?"html":r.attr||_(n.parentElem,!0),n)),ge(n,n.tagCtx),t||n}function n(e){for(var t,n,r,i,a,l,o,s=[],d=e.length,c=d;c--;)s.push(e[c]);for(c=d;c--;)if((i=s[c]).parentNode){if(o=i._jsvBnd)for(o=o.slice(1).split("&"),i._jsvBnd="",n=o.length;n--;)h(o[n],i._jsvLnkdEl);if(a=oe(p(i)+(i._dfr||""),!0,X))for(t=0,r=a.length;t<r;t++)"_"===(l=a[t]).ch?(l=$e[l.id])&&l.data!==ee&&l.parent.removeViews(l._.key,ee,!0):h(l.id)}}function h(e,t){var n,r,i,a,l,o=Pe[e];if(o)if(i=(r=o.linkCtx).tag,t)delete i.linkedElem;else{for(n in o.bnd)a=o.bnd[n],l=".obs"+o.cbId,(Z.isArray(a)?Z([a]).off(L+l):Z(a)).off(R+l),delete o.bnd[n];r=o.linkCtx,i&&(i.onDispose&&i.onDispose(),i._elCnt||(i._prv&&i._prv.parentNode.removeChild(i._prv),i._nxt&&i._nxt.parentNode.removeChild(i._nxt)),i.disposed=!0),delete r.view._.bnds[e],delete Pe[e],delete N._cbBnds[o.cbId]}}function a(e,t){return e===ee?(x&&(Z(x).off(V,b),x=ee),e=!0,f.removeViews(),n(be.body.getElementsByTagName("*"))):t&&(t=t.jquery?t:Z(t),!0===e?t.each(function(){for(var e;(e=_e(this,!0))&&e.parent;)e.parent.removeViews(e._.key,ee,!0);n(this.getElementsByTagName("*"))}):e===ee&&n(t)),t}function o(e,t){return a(this,e)}function w(e,t,n,r,i,a){var l,o,s,d,c,p,f=0,u=e===t;if(e){for(l=0,o=(s=oe(e)||[]).length;l<o;l++){if((p=(d=s[l]).id)===r&&d.ch===i){if(!a)break;o=0}u||(c="_"===d.ch?$e[p]:Pe[p].linkCtx.tag,d.open?c._prv=t:d.close&&(c._nxt=t)),f+=p.length+2}f&&e.setAttribute(Ce,e.getAttribute(Ce).slice(f)),(e=(o=(e=t?t.getAttribute(Ce):n._dfr).indexOf("/"+r+i)+1)?s._tkns.slice(0,f)+e.slice(o+(a?-1:r.length+1)):e)&&(t?t.setAttribute(Ce,e):n._dfr=e)}else n._dfr=le(n._dfr,"#"+r+i),a||t||(n._dfr=le(n._dfr,"/"+r+i))}if(!Z)throw"requires jQuery";if(!Z.views)throw"requires JsRender";if(!Z.observable)throw"requires jquery.observable";var ve,x,_e,k,j,A,E,I,t,me,be,v,N,xe,ye,f,B,d,S,T,c,Ce,we,R,L,V,$,P,q,O,D,ke,je,M,Ae,U,e,F,K,Ee,Ie,Ne,Be,Se,Te,Re,Le,Ve,Q,$e,Pe,H,z,qe,J,X,G,Oe,W;Z.link||(be=y.document,v=Z.views,N=v.sub,xe=v.settings,ye=N.extend,f=N.View(ee,"top"),B=Z.isFunction,d=v.templates,S=v.converters,T=Z.observable,c=T.observe,Ce="data-jsv",we=xe.linkAttr||"data-link",R=N.propChng=N.propChng||"propertyChange",L=N.arrChng=N.arrChng||"arrayChange",N._cbBnds=N._cbBnds||{},V="change.jsv",$="onBeforeChange",P="onAfterChange",q="checked",O="checkbox",D="radio",ke='"><\/script>',je='<script type="jsv',Ae=(M="script,["+Ce+"]")+",["+we+"]",U={value:"val",input:"val",html:"html",text:"text"},e={from:"value",to:"value"},F=Z.cleanData,K=xe.delimiters,Ee=N.error,Ie=N.syntaxError,Ne=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,Be=be.createDocumentFragment(),Se=be.querySelector,Te={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},Re={tr:"table"},Le=xe.wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ve={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},Q={},$e={0:f},Pe={},H=1,z=/^#(view\.?)?/,qe=/(^|(\/>)|<\/(\w+)>|>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*)/g,J=/(#)()(\d+)(_)/g,X=/(#)()(\d+)([_^])/g,G=/(?:(#)|(\/))(\d+)(_)/g,Oe=/(#)()(\d+)(\^)/g,W=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,Le.optgroup=Le.option,Le.tbody=Le.tfoot=Le.colgroup=Le.caption=Le.thead,Le.th=Le.td,N.onStoreItem=function(e,t,n){n&&e===d&&(n.link=r,n.unlink=o,t&&(Z.link[t]=function(){return r.apply(n,arguments)},Z.unlink[t]=function(){return o.apply(n,arguments)}))},(xe.delimiters=function(){var e=K.apply(v,arguments);return j=e[0],A=e[1],E=e[2],I=e[3],t=e[4],k=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+t+")?(\\"+A+N.rTag+"\\"+E+")","g"),this})(),N.viewInfos=oe,ve={addViews:function(e,t,n){var r,i,a=this,l=t.length,o=a.views;if(!a._.useKey&&l&&(n=a.tmpl)&&(i=o.length+l,!1!==s(a,e,n,o,t,a.ctx)))for(r=e+l;r<i;r++)T(o[r]).setProperty("index",r);return a},removeViews:function(e,t,o){function n(e){var t,n,r,i,a,l=s[e];if(l&&l.link){for(n in t=l._.id,o||(a=l.nodes()),l.removeViews(ee,ee,!0),l.data=ee,r=l._prv,i=l._nxt,e=l.parentElem,o||(l._elCnt&&w(r,i,e,t,"_"),Z(a).remove()),l._elCnt||(r.parentNode&&e.removeChild(r),i.parentNode&&e.removeChild(i)),re(l),l._.bnds)h(n);delete $e[t]}}var r,i,a,l=!this._.useKey,s=this.views;if(l&&(a=s.length),e===ee)if(l){for(r=a;r--;)n(r);this.views=[]}else{for(i in s)n(i);this.views={}}else if(t===ee&&(l?t=1:(n(e),delete s[e])),l&&t){for(r=e+t;r-- >e;)n(r);if(s.splice(e,t),a=s.length)for(;e<a;)T(s[e]).setProperty("index",e++)}return this},refresh:function(e){var t=this,n=t.parent;return n&&(s(t,t.index,t.tmpl,n.views,t.data,e,!0),re(t)),t},nodes:pe,contents:ce,childTags:fe,link:function(e,s,t,n,g,r){function i(e,t){var n,r,i,a,l,o=[];if(e){for("@"===e._tkns.charAt(0)&&(t=u.previousSibling,u.parentNode.removeChild(u),u=null),p=e.length;p--;){if(a=(_=e[p]).ch,n=_.path)for(c=n.length-1;r=n.charAt(c--);)t="+"===r?"-"===n.charAt(c)?(c--,t.previousSibling):t.parentNode:t.lastChild;"^"===a?(h=Pe[i=_.id])&&(l=t&&(!u||u.parentNode!==t),u&&!l||(h.parentElem=t),_.elCnt&&l&&(t._dfr=(_.open?"#":"/")+i+a+(t._dfr||"")),o.push([l?null:u,_])):(v=$e[i=_.id])&&(v.link||(v.parentElem=t||u&&u.parentNode||s,ye(v,ve),v._.onRender=ie,v._.onArrayChange=ne,re(v)),l=v.parentElem,_.open?(v._elCnt=_.elCnt,t?t._dfr="#"+i+a+(t._dfr||""):(v._prv||(l._dfr=le(l._dfr,"#"+i+a)),v._prv=u)):(!t||u&&u.parentNode===t?u&&(v._nxt||(l._dfr=le(l._dfr,"/"+i+a)),v._nxt=u):(t._dfr="/"+i+a+(t._dfr||""),v._nxt=ee),d=v.linkCtx,(a=W||v.ctx&&v.ctx.onAfterCreate)&&a.call(d,v)))}for(p=o.length;p--;)J.push(o[p])}return!e||e.elCnt}function a(){for(f=Se?s.querySelectorAll(Ae):Z(Ae,s).get(),o=f.length,t&&t.innerHTML&&(t=(b=Se?t.querySelectorAll(Ae):Z(Ae,t).get()).length?b[b.length-1]:t),l=E=0;l<o;l++)if(u=f[l],t&&!F)F=u===t;else{if(n&&u===n)break;u.parentNode&&Y(oe(u,ee,w&&Oe))&&!I&&u.getAttribute(we)&&J.push([u])}if(se(t,q),se(n,q),I)K&&K.resolve();else{for(q&&z+M&&(u=n,z&&(n?i(oe(z+"+",!0),n):i(oe(z,!0),s)),i(oe(M,!0),s),n&&(P=n.getAttribute(Ce),(o=P.indexOf(U)+1)&&(P=P.slice(o+U.length-1)),n.setAttribute(Ce,M+P))),o=J.length,l=0;l<o;l++)u=J[l],m=u[1],u=u[0],m?(h=Pe[m.id],(d=h.linkCtx)&&((h=d.tag).linkCtx=d),m.open?(u&&(h.parentElem=u.parentNode,h._prv=u),h._elCnt=m.elCnt,!h||h.onBeforeLink&&!1===h.onBeforeLink()||h._.bound||(h._.bound=!0,v=h.tagCtx.view,ae(ee,h._prv,v,v.data||e,m.id)),h._.linking=!0):(h._nxt=u,h._.linking&&(A=h.tagCtx,v=A.view,h.contents=ce,h.nodes=pe,h.childTags=fe,h.currentCtxs=ue,h.update=te,h.refresh=he,delete h._.linking,h._.bound||(h._.bound=!0,ae(ee,h._prv,v,v.data||e,m.id)),ge(h,A)))):(v=_e(u),ae(u.getAttribute(we),u,v,v.data||e));K&&K.resolve()}}var d,h,l,o,c,p,f,u,v,_,m,b,x,y,C,w,k,j,A,E,I,N,B,S,T,R,L,V,$,P,q,O,D,M,U,F,K,Q=xe.noDomLevel0,H=this._.id+"_",z="",J=[],X=[],G=[],W=this.hlp("onAfterCreate"),Y=i;if(r&&(K=r.lazyLink&&Z.Deferred(),r.tmpl?x="/"+r._.id+"_":(I=r.get,r.tag&&(H=r.tag+"^",r=!0)),r=!0===r),I&&(Y=function(e){var t,n;if(e)for(p=e.length,c=0;c<p;c++)if(_=e[c],I.id)I.id=I.id!==_.id&&I.id;else if(n=h=Pe[_.id].linkCtx.tag,!h.flow){if(!k){for(t=1;n=n.parent;)t++;E=E||t}!k&&t!==E||j&&h.tagName!==j||w.push(h)}},w=I.tags,k=I.deep,j=I.name),s=s?""+s===s?Z(s)[0]:s.jquery?s[0]:s:this.parentElem||be.body,R=s.tagName.toLowerCase(),q=!!Te[R],t=t&&de(t,q),n=n&&de(n,q)||null,g!==ee){if(V=$=be.createElement("div"),U=M="",D="http://www.w3.org/2000/svg"===s.namespaceURI?"svg_ns":(T=Ne.exec(g))&&T[1]||"",Q&&T&&T[2]&&Ee("Unsupported: "+T[2]),q){for(C=n;C&&!(y=oe(C));)C=C.nextSibling;(P=y?y._tkns:s._dfr)&&(T=x||"",!r&&x||(T+="#"+H),(c=P.indexOf(T))+1&&(c+=T.length,U=M=P.slice(0,c),P=P.slice(c),y?C.setAttribute(Ce,P):s._dfr=P))}for(L=ee,g=(""+g).replace(qe,function(e,t,n,r,i,a,l,o,s,d,c,p){var f,u="";return h=o||s||"",r=r||d,n=n||p,L&&!n&&(r||h||a)&&(L=ee,R=X.shift()),(r=r||n)&&(L=ee,me&&(n||p?Ve[R]||(f="'<"+R+".../"):Ve[r]?f="'</"+r:X.length&&r===R||(f="Mismatch: '</"+r),f&&Ie(f+">' in:\n"+g)),O=q,R=X.shift(),q=Te[R],d=d?"</"+d+">":"",O&&(z+=M,M="",q?z+="-":(u=d+je+"@"+z+ke+(c||""),z=G.shift()))),q?(a?M+=a:t=d||p||"",h&&(t+=h,M&&(t+=" "+Ce+'="'+M+'"',M=""))):t=a?t+u+i+je+a+ke+l+h:u||e,h&&(X.unshift(R),R=h.slice(1),X[0]&&X[0]===Re[R]&&Ee("Parent of <tr> must be <tbody>"),L=Ve[R],(q=Te[R])&&!O&&(G.unshift(z),z=""),O=q,z&&q&&(z+="+")),t}),me&&X.length&&Ie("Mismatched '<"+R+"...>' in:\n"+g),Be.appendChild($),N=(D=Le[D]||Le.div)[0],V.innerHTML=D[1]+g+D[2];N--;)V=V.lastChild;for(Be.removeChild($),B=be.createDocumentFragment();S=V.firstChild;)B.appendChild(S);s.insertBefore(B,n)}return K?setTimeout(a,0):a(),K&&K.promise()}},xe.merge={input:{from:function(e){return e.type===O?e[q]:e.value},to:"value"},textarea:e,select:e,optgroup:{to:"label"}},xe.debugMode&&(me=!xe.noValidate,y._jsv={views:$e,bindings:Pe}),S.merge=function(e){this.linkCtx.attr;var t,n=this.linkCtx._val||"",r=this.tagCtx.props.toggle;return r&&(t="(\\s(?="+(t=r.replace(/[\\^$.|?*+()[{]/g,"\\$&"))+"$)|(\\s))?("+t+"(\\s|$))",e=(n=n.replace(new RegExp(t),"$2"))+(e?(n&&" ")+r:"")),e},ye(Z,{view:v.view=_e=function(e,t,n){t!==!!t&&(n=t,t=ee);var r,i,a,l,o,s,d,c=0,p=be.body;if(e&&e!==p&&1<f._.useKey&&(e=""+e===e?Z(e)[0]:e.jquery?e[0]:e))if(t){for(s=(d=Se?e.querySelectorAll(M):Z(M,e).get()).length,a=0;a<s;a++)for(l=0,o=(i=oe(d[a],ee,J)).length;l<o;l++)if(r=i[l],(r=$e[r.id])&&(r=r&&n?r.get(!0,n):r))return r}else for(;e;){if(i=oe(e,ee,G))for(s=i.length;s--;)if((r=i[s]).open){if(c<1)return(r=$e[r.id])&&n?r.get(n):r||f;c--}else c++;e=e.previousSibling||e.parentNode}return t?ee:f},link:v.link=l,unlink:v.unlink=a,cleanData:function(e){e.length&&(n(e),F.call(Z,e))}}),ye(Z.fn,{link:function(e,t,n,r,i,a){return l(e,this,t,n,r,i,a)},unlink:function(e){return a(e,this)},view:function(e){return _e(this[0],e)}}),ye(f,{tmpl:{links:{},tags:{}}}),ye(f,ve),f._.onRender=ie)}(this,this.jQuery);