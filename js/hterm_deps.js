"use strict";Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},String.prototype.endsWith||(String.prototype.endsWith=function(e,r){var t=this.toString();("number"!=typeof r||!isFinite(r)||Math.floor(r)!==r||r>t.length)&&(r=t.length),r-=e.length;e=t.indexOf(e,r);return-1!==e&&e===r}),String.prototype.repeat||(String.prototype.repeat=function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");var r=""+this;if((e=(e=+e)!=e?0:e)<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==r.length||0==e)return"";if(1<<28<=r.length*e)throw new RangeError("repeat count must not overflow maximum string size");for(var t="",i=0;i<e;i++)t+=r;return t}),String.prototype.startsWith||(String.prototype.startsWith=function(e,r){return this.substr(!r||r<0?0:+r,e.length)===e}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},writable:!0,configurable:!0}),String.prototype.codePointAt||function(){function e(e){if(null==this)throw TypeError();var r=String(this),t=r.length,i=e?Number(e):0;if(!((i=i!=i?0:i)<0||t<=i)){var n,e=r.charCodeAt(i);return 55296<=e&&e<=56319&&i+1<t&&56320<=(n=r.charCodeAt(i+1))&&n<=57343?1024*(e-55296)+n-56320+65536:e}}var r=function(){try{var e={},r=Object.defineProperty,t=r(e,e,e)&&r}catch(e){}return t}();r?r(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(void 0!==lib)throw new Error('Global "lib" object already exists.');var reduce,isEnumerable,concat,lib={runtimeDependencies_:{},initCallbacks_:[],rtdep:function(e){try{throw new Error}catch(e){var r=e.stack.split("\n"),t=3<=r.length?r[2].replace(/^\s*at\s+/,""):r[1].replace(/^\s*global code@/,"")}for(var i=0;i<arguments.length;i++){var n=arguments[i];n instanceof Array?lib.rtdep.apply(lib,n):(this.runtimeDependencies_[n]||(this.runtimeDependencies_[n]=[])).push(t)}},ensureRuntimeDependencies_:function(){var e,r=!0;for(e in lib.runtimeDependencies_)for(var t=lib.runtimeDependencies_[e],i=e.split("."),n=window||self,o=0;o<i.length;o++){if(!(i[o]in n)){console.warn('Missing "'+e+'" is needed by',t),r=!1;break}n=n[i[o]]}if(!r)throw new Error("Failed runtime dependency check")},registerInit:function(e,r){return lib.initCallbacks_.push([e,r]),r}};lib.init=function(r,t){function i(){var e;n.length?(e=n.shift(),t&&t("init: "+e[0]),e[1](lib.f.alarm(i))):r()}var n=lib.initCallbacks_;if("function"!=typeof r)throw new Error("Missing or invalid argument: onInit");lib.ensureRuntimeDependencies_(),setTimeout(i,0)},String.prototype.padStart||(String.prototype.padStart=function(e,r){return(e-=this.length)<=0?String(this):(r=e>(r=void 0===r?" ":r).length?r.repeat(e/r.length+1):r).slice(0,e)+String(this)}),String.prototype.padEnd||(String.prototype.padEnd=function(e,r){return(e-=this.length)<=0?String(this):(e>(r=void 0===r?" ":r).length&&(r=r.repeat(e/r.length+1)),String(this)+r.slice(0,e))}),Object.values&&Object.entries||(reduce=Function.bind.call(Function.call,Array.prototype.reduce),isEnumerable=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),concat=Function.bind.call(Function.call,Array.prototype.concat),Object.values||(Object.values=function(t){return reduce(Reflect.ownKeys(t),function(e,r){return concat(e,"string"==typeof r&&isEnumerable(t,r)?[t[r]]:[])},[])}),Object.entries||(Object.entries=function(t){return reduce(Reflect.ownKeys(t),function(e,r){return concat(e,"string"==typeof r&&isEnumerable(t,r)?[[r,t[r]]]:[])},[])})),lib.array={},lib.array.arrayBigEndianToUint32=function(e){return(e[0]<<24|e[1]<<16|e[2]<<8|e[3]<<0)>>>0},lib.array.uint32ToArrayBigEndian=function(e){return[e>>>24&255,e>>>16&255,e>>>8&255,e>>>0&255]},lib.array.concatTyped=function(){for(var e=0,r=arguments.length,t=Array(r),i=0;i<r;i++)t[i]=arguments[i];var n=!0,o=!1,s=void 0;try{for(var a,g=t[Symbol.iterator]();!(n=(a=g.next()).done);n=!0)e+=a.value.length}catch(e){o=!0,s=e}finally{try{!n&&g.return&&g.return()}finally{if(o)throw s}}var l=new t[0].constructor(e),b=0,u=!0,c=!1,h=void 0;try{for(var f=t[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var p=p.value;l.set(p,b),b+=p.length}}catch(e){c=!0,h=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw h}}return l},lib.array.compare=function(e,r){if(null===e||null===r)return null===e&&null===r;if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==r[t])return!1;return!0},lib.colors={},lib.colors.re_={hex16:/#([a-f0-9])([a-f0-9])([a-f0-9])/i,hex24:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/i,rgb:new RegExp("^/s*rgb/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*/)/s*$".replace(/\//g,"\\"),"i"),rgba:new RegExp("^/s*rgba/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)/)/s*$".replace(/\//g,"\\"),"i"),rgbx:new RegExp("^/s*rgba?/s*/(/s*(/d{1,3})/s*,/s*(/d{1,3})/s*,/s*(/d{1,3})/s*(?:,/s*(/d+(?:/./d+)?)/s*)?/)/s*$".replace(/\//g,"\\"),"i"),x11rgb:/^\s*rgb:([a-f0-9]{1,4})\/([a-f0-9]{1,4})\/([a-f0-9]{1,4})\s*$/i,name:/[a-z][a-z0-9\s]+/},lib.colors.rgbToX11=function(e){function r(e){return e=(257*Math.min(e,255)).toString(16),lib.f.zpad(e,4)}e=e.match(lib.colors.re_.rgbx);return e?"rgb:"+r(e[1])+"/"+r(e[2])+"/"+r(e[3]):null},lib.colors.x11HexToCSS=function(e){if(!e.startsWith("#"))return null;if(e=e.substr(1),-1==[3,6,9,12].indexOf(e.length))return null;if(e.match(/[^a-f0-9]/i))return null;var r=e.length/3,t=e.substr(0,r),i=e.substr(r,r),e=e.substr(r+r,r);return lib.colors.arrayToRGBA([t,i,e].map(function(e){return e=parseInt(e,16),2==r?e:1==r?e<<4:e>>4*(r-2)}))},lib.colors.x11ToCSS=function(e){var r=e.match(lib.colors.re_.x11rgb);return r?(r.splice(0,1),lib.colors.arrayToRGBA(r.map(function(e){return 1==e.length?parseInt(e+e,16):2==e.length?parseInt(e,16):(3==e.length&&(e+=e.substr(2)),Math.round(parseInt(e,16)/257))}))):e.startsWith("#")?lib.colors.x11HexToCSS(e):lib.colors.nameToRGB(e)},lib.colors.hexToRGB=function(e){var r=lib.colors.re_.hex16,t=lib.colors.re_.hex24;function i(e){e=(e=4==e.length?e.replace(r,function(e,r,t,i){return"#"+r+r+t+t+i+i}):e).match(t);return e?"rgb("+parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16)+")":null}if(e instanceof Array)for(var n=0;n<e.length;n++)e[n]=i(e[n]);else e=i(e);return e},lib.colors.rgbToHex=function(e){function r(e){e=lib.colors.crackRGB(e);return e?"#"+lib.f.zpad((parseInt(e[0])<<16|parseInt(e[1])<<8|parseInt(e[2])<<0).toString(16),6):null}if(e instanceof Array)for(var t=0;t<e.length;t++)e[t]=r(e[t]);else e=r(e);return e},lib.colors.normalizeCSS=function(e){return e.startsWith("#")?lib.colors.hexToRGB(e):lib.colors.re_.rgbx.test(e)?e:lib.colors.nameToRGB(e)},lib.colors.arrayToRGBA=function(e){var r=3<e.length?e[3]:1;return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+r+")"},lib.colors.setAlpha=function(e,r){e=lib.colors.crackRGB(e);return e[3]=r,lib.colors.arrayToRGBA(e)},lib.colors.mix=function(e,r,t){for(var i=lib.colors.crackRGB(e),n=lib.colors.crackRGB(r),o=0;o<4;++o){var s=n[o]-i[o];i[o]=Math.round(parseInt(i[o])+s*t)}return lib.colors.arrayToRGBA(i)},lib.colors.crackRGB=function(e){var r;if(e.startsWith("rgba")){if(r=e.match(lib.colors.re_.rgba))return r.shift(),r}else if(r=e.match(lib.colors.re_.rgb))return r.shift(),r.push("1"),r;return console.error("Couldn't crack: "+e),null},lib.colors.nameToRGB=function(e){return e in lib.colors.colorNames||(e=e.toLowerCase())in lib.colors.colorNames||(e=e.replace(/\s+/g,""))in lib.colors.colorNames?lib.colors.colorNames[e]:null},lib.colors.stockColorPalette=lib.colors.hexToRGB(["#000000","#CC0000","#4E9A06","#C4A000","#3465A4","#75507B","#06989A","#D3D7CF","#555753","#EF2929","#00BA13","#FCE94F","#729FCF","#F200CB","#00B5BD","#EEEEEC","#000000","#00005F","#000087","#0000AF","#0000D7","#0000FF","#005F00","#005F5F","#005F87","#005FAF","#005FD7","#005FFF","#008700","#00875F","#008787","#0087AF","#0087D7","#0087FF","#00AF00","#00AF5F","#00AF87","#00AFAF","#00AFD7","#00AFFF","#00D700","#00D75F","#00D787","#00D7AF","#00D7D7","#00D7FF","#00FF00","#00FF5F","#00FF87","#00FFAF","#00FFD7","#00FFFF","#5F0000","#5F005F","#5F0087","#5F00AF","#5F00D7","#5F00FF","#5F5F00","#5F5F5F","#5F5F87","#5F5FAF","#5F5FD7","#5F5FFF","#5F8700","#5F875F","#5F8787","#5F87AF","#5F87D7","#5F87FF","#5FAF00","#5FAF5F","#5FAF87","#5FAFAF","#5FAFD7","#5FAFFF","#5FD700","#5FD75F","#5FD787","#5FD7AF","#5FD7D7","#5FD7FF","#5FFF00","#5FFF5F","#5FFF87","#5FFFAF","#5FFFD7","#5FFFFF","#870000","#87005F","#870087","#8700AF","#8700D7","#8700FF","#875F00","#875F5F","#875F87","#875FAF","#875FD7","#875FFF","#878700","#87875F","#878787","#8787AF","#8787D7","#8787FF","#87AF00","#87AF5F","#87AF87","#87AFAF","#87AFD7","#87AFFF","#87D700","#87D75F","#87D787","#87D7AF","#87D7D7","#87D7FF","#87FF00","#87FF5F","#87FF87","#87FFAF","#87FFD7","#87FFFF","#AF0000","#AF005F","#AF0087","#AF00AF","#AF00D7","#AF00FF","#AF5F00","#AF5F5F","#AF5F87","#AF5FAF","#AF5FD7","#AF5FFF","#AF8700","#AF875F","#AF8787","#AF87AF","#AF87D7","#AF87FF","#AFAF00","#AFAF5F","#AFAF87","#AFAFAF","#AFAFD7","#AFAFFF","#AFD700","#AFD75F","#AFD787","#AFD7AF","#AFD7D7","#AFD7FF","#AFFF00","#AFFF5F","#AFFF87","#AFFFAF","#AFFFD7","#AFFFFF","#D70000","#D7005F","#D70087","#D700AF","#D700D7","#D700FF","#D75F00","#D75F5F","#D75F87","#D75FAF","#D75FD7","#D75FFF","#D78700","#D7875F","#D78787","#D787AF","#D787D7","#D787FF","#D7AF00","#D7AF5F","#D7AF87","#D7AFAF","#D7AFD7","#D7AFFF","#D7D700","#D7D75F","#D7D787","#D7D7AF","#D7D7D7","#D7D7FF","#D7FF00","#D7FF5F","#D7FF87","#D7FFAF","#D7FFD7","#D7FFFF","#FF0000","#FF005F","#FF0087","#FF00AF","#FF00D7","#FF00FF","#FF5F00","#FF5F5F","#FF5F87","#FF5FAF","#FF5FD7","#FF5FFF","#FF8700","#FF875F","#FF8787","#FF87AF","#FF87D7","#FF87FF","#FFAF00","#FFAF5F","#FFAF87","#FFAFAF","#FFAFD7","#FFAFFF","#FFD700","#FFD75F","#FFD787","#FFD7AF","#FFD7D7","#FFD7FF","#FFFF00","#FFFF5F","#FFFF87","#FFFFAF","#FFFFD7","#FFFFFF","#080808","#121212","#1C1C1C","#262626","#303030","#3A3A3A","#444444","#4E4E4E","#585858","#626262","#6C6C6C","#767676","#808080","#8A8A8A","#949494","#9E9E9E","#A8A8A8","#B2B2B2","#BCBCBC","#C6C6C6","#D0D0D0","#DADADA","#E4E4E4","#EEEEEE"]),lib.colors.colorPalette=lib.colors.stockColorPalette,lib.colors.colorNames={aliceblue:"rgb(240, 248, 255)",antiquewhite:"rgb(250, 235, 215)",antiquewhite1:"rgb(255, 239, 219)",antiquewhite2:"rgb(238, 223, 204)",antiquewhite3:"rgb(205, 192, 176)",antiquewhite4:"rgb(139, 131, 120)",aquamarine:"rgb(127, 255, 212)",aquamarine1:"rgb(127, 255, 212)",aquamarine2:"rgb(118, 238, 198)",aquamarine3:"rgb(102, 205, 170)",aquamarine4:"rgb(69, 139, 116)",azure:"rgb(240, 255, 255)",azure1:"rgb(240, 255, 255)",azure2:"rgb(224, 238, 238)",azure3:"rgb(193, 205, 205)",azure4:"rgb(131, 139, 139)",beige:"rgb(245, 245, 220)",bisque:"rgb(255, 228, 196)",bisque1:"rgb(255, 228, 196)",bisque2:"rgb(238, 213, 183)",bisque3:"rgb(205, 183, 158)",bisque4:"rgb(139, 125, 107)",black:"rgb(0, 0, 0)",blanchedalmond:"rgb(255, 235, 205)",blue:"rgb(0, 0, 255)",blue1:"rgb(0, 0, 255)",blue2:"rgb(0, 0, 238)",blue3:"rgb(0, 0, 205)",blue4:"rgb(0, 0, 139)",blueviolet:"rgb(138, 43, 226)",brown:"rgb(165, 42, 42)",brown1:"rgb(255, 64, 64)",brown2:"rgb(238, 59, 59)",brown3:"rgb(205, 51, 51)",brown4:"rgb(139, 35, 35)",burlywood:"rgb(222, 184, 135)",burlywood1:"rgb(255, 211, 155)",burlywood2:"rgb(238, 197, 145)",burlywood3:"rgb(205, 170, 125)",burlywood4:"rgb(139, 115, 85)",cadetblue:"rgb(95, 158, 160)",cadetblue1:"rgb(152, 245, 255)",cadetblue2:"rgb(142, 229, 238)",cadetblue3:"rgb(122, 197, 205)",cadetblue4:"rgb(83, 134, 139)",chartreuse:"rgb(127, 255, 0)",chartreuse1:"rgb(127, 255, 0)",chartreuse2:"rgb(118, 238, 0)",chartreuse3:"rgb(102, 205, 0)",chartreuse4:"rgb(69, 139, 0)",chocolate:"rgb(210, 105, 30)",chocolate1:"rgb(255, 127, 36)",chocolate2:"rgb(238, 118, 33)",chocolate3:"rgb(205, 102, 29)",chocolate4:"rgb(139, 69, 19)",coral:"rgb(255, 127, 80)",coral1:"rgb(255, 114, 86)",coral2:"rgb(238, 106, 80)",coral3:"rgb(205, 91, 69)",coral4:"rgb(139, 62, 47)",cornflowerblue:"rgb(100, 149, 237)",cornsilk:"rgb(255, 248, 220)",cornsilk1:"rgb(255, 248, 220)",cornsilk2:"rgb(238, 232, 205)",cornsilk3:"rgb(205, 200, 177)",cornsilk4:"rgb(139, 136, 120)",cyan:"rgb(0, 255, 255)",cyan1:"rgb(0, 255, 255)",cyan2:"rgb(0, 238, 238)",cyan3:"rgb(0, 205, 205)",cyan4:"rgb(0, 139, 139)",darkblue:"rgb(0, 0, 139)",darkcyan:"rgb(0, 139, 139)",darkgoldenrod:"rgb(184, 134, 11)",darkgoldenrod1:"rgb(255, 185, 15)",darkgoldenrod2:"rgb(238, 173, 14)",darkgoldenrod3:"rgb(205, 149, 12)",darkgoldenrod4:"rgb(139, 101, 8)",darkgray:"rgb(169, 169, 169)",darkgreen:"rgb(0, 100, 0)",darkgrey:"rgb(169, 169, 169)",darkkhaki:"rgb(189, 183, 107)",darkmagenta:"rgb(139, 0, 139)",darkolivegreen:"rgb(85, 107, 47)",darkolivegreen1:"rgb(202, 255, 112)",darkolivegreen2:"rgb(188, 238, 104)",darkolivegreen3:"rgb(162, 205, 90)",darkolivegreen4:"rgb(110, 139, 61)",darkorange:"rgb(255, 140, 0)",darkorange1:"rgb(255, 127, 0)",darkorange2:"rgb(238, 118, 0)",darkorange3:"rgb(205, 102, 0)",darkorange4:"rgb(139, 69, 0)",darkorchid:"rgb(153, 50, 204)",darkorchid1:"rgb(191, 62, 255)",darkorchid2:"rgb(178, 58, 238)",darkorchid3:"rgb(154, 50, 205)",darkorchid4:"rgb(104, 34, 139)",darkred:"rgb(139, 0, 0)",darksalmon:"rgb(233, 150, 122)",darkseagreen:"rgb(143, 188, 143)",darkseagreen1:"rgb(193, 255, 193)",darkseagreen2:"rgb(180, 238, 180)",darkseagreen3:"rgb(155, 205, 155)",darkseagreen4:"rgb(105, 139, 105)",darkslateblue:"rgb(72, 61, 139)",darkslategray:"rgb(47, 79, 79)",darkslategray1:"rgb(151, 255, 255)",darkslategray2:"rgb(141, 238, 238)",darkslategray3:"rgb(121, 205, 205)",darkslategray4:"rgb(82, 139, 139)",darkslategrey:"rgb(47, 79, 79)",darkturquoise:"rgb(0, 206, 209)",darkviolet:"rgb(148, 0, 211)",debianred:"rgb(215, 7, 81)",deeppink:"rgb(255, 20, 147)",deeppink1:"rgb(255, 20, 147)",deeppink2:"rgb(238, 18, 137)",deeppink3:"rgb(205, 16, 118)",deeppink4:"rgb(139, 10, 80)",deepskyblue:"rgb(0, 191, 255)",deepskyblue1:"rgb(0, 191, 255)",deepskyblue2:"rgb(0, 178, 238)",deepskyblue3:"rgb(0, 154, 205)",deepskyblue4:"rgb(0, 104, 139)",dimgray:"rgb(105, 105, 105)",dimgrey:"rgb(105, 105, 105)",dodgerblue:"rgb(30, 144, 255)",dodgerblue1:"rgb(30, 144, 255)",dodgerblue2:"rgb(28, 134, 238)",dodgerblue3:"rgb(24, 116, 205)",dodgerblue4:"rgb(16, 78, 139)",firebrick:"rgb(178, 34, 34)",firebrick1:"rgb(255, 48, 48)",firebrick2:"rgb(238, 44, 44)",firebrick3:"rgb(205, 38, 38)",firebrick4:"rgb(139, 26, 26)",floralwhite:"rgb(255, 250, 240)",forestgreen:"rgb(34, 139, 34)",gainsboro:"rgb(220, 220, 220)",ghostwhite:"rgb(248, 248, 255)",gold:"rgb(255, 215, 0)",gold1:"rgb(255, 215, 0)",gold2:"rgb(238, 201, 0)",gold3:"rgb(205, 173, 0)",gold4:"rgb(139, 117, 0)",goldenrod:"rgb(218, 165, 32)",goldenrod1:"rgb(255, 193, 37)",goldenrod2:"rgb(238, 180, 34)",goldenrod3:"rgb(205, 155, 29)",goldenrod4:"rgb(139, 105, 20)",gray:"rgb(190, 190, 190)",gray0:"rgb(0, 0, 0)",gray1:"rgb(3, 3, 3)",gray10:"rgb(26, 26, 26)",gray100:"rgb(255, 255, 255)",gray11:"rgb(28, 28, 28)",gray12:"rgb(31, 31, 31)",gray13:"rgb(33, 33, 33)",gray14:"rgb(36, 36, 36)",gray15:"rgb(38, 38, 38)",gray16:"rgb(41, 41, 41)",gray17:"rgb(43, 43, 43)",gray18:"rgb(46, 46, 46)",gray19:"rgb(48, 48, 48)",gray2:"rgb(5, 5, 5)",gray20:"rgb(51, 51, 51)",gray21:"rgb(54, 54, 54)",gray22:"rgb(56, 56, 56)",gray23:"rgb(59, 59, 59)",gray24:"rgb(61, 61, 61)",gray25:"rgb(64, 64, 64)",gray26:"rgb(66, 66, 66)",gray27:"rgb(69, 69, 69)",gray28:"rgb(71, 71, 71)",gray29:"rgb(74, 74, 74)",gray3:"rgb(8, 8, 8)",gray30:"rgb(77, 77, 77)",gray31:"rgb(79, 79, 79)",gray32:"rgb(82, 82, 82)",gray33:"rgb(84, 84, 84)",gray34:"rgb(87, 87, 87)",gray35:"rgb(89, 89, 89)",gray36:"rgb(92, 92, 92)",gray37:"rgb(94, 94, 94)",gray38:"rgb(97, 97, 97)",gray39:"rgb(99, 99, 99)",gray4:"rgb(10, 10, 10)",gray40:"rgb(102, 102, 102)",gray41:"rgb(105, 105, 105)",gray42:"rgb(107, 107, 107)",gray43:"rgb(110, 110, 110)",gray44:"rgb(112, 112, 112)",gray45:"rgb(115, 115, 115)",gray46:"rgb(117, 117, 117)",gray47:"rgb(120, 120, 120)",gray48:"rgb(122, 122, 122)",gray49:"rgb(125, 125, 125)",gray5:"rgb(13, 13, 13)",gray50:"rgb(127, 127, 127)",gray51:"rgb(130, 130, 130)",gray52:"rgb(133, 133, 133)",gray53:"rgb(135, 135, 135)",gray54:"rgb(138, 138, 138)",gray55:"rgb(140, 140, 140)",gray56:"rgb(143, 143, 143)",gray57:"rgb(145, 145, 145)",gray58:"rgb(148, 148, 148)",gray59:"rgb(150, 150, 150)",gray6:"rgb(15, 15, 15)",gray60:"rgb(153, 153, 153)",gray61:"rgb(156, 156, 156)",gray62:"rgb(158, 158, 158)",gray63:"rgb(161, 161, 161)",gray64:"rgb(163, 163, 163)",gray65:"rgb(166, 166, 166)",gray66:"rgb(168, 168, 168)",gray67:"rgb(171, 171, 171)",gray68:"rgb(173, 173, 173)",gray69:"rgb(176, 176, 176)",gray7:"rgb(18, 18, 18)",gray70:"rgb(179, 179, 179)",gray71:"rgb(181, 181, 181)",gray72:"rgb(184, 184, 184)",gray73:"rgb(186, 186, 186)",gray74:"rgb(189, 189, 189)",gray75:"rgb(191, 191, 191)",gray76:"rgb(194, 194, 194)",gray77:"rgb(196, 196, 196)",gray78:"rgb(199, 199, 199)",gray79:"rgb(201, 201, 201)",gray8:"rgb(20, 20, 20)",gray80:"rgb(204, 204, 204)",gray81:"rgb(207, 207, 207)",gray82:"rgb(209, 209, 209)",gray83:"rgb(212, 212, 212)",gray84:"rgb(214, 214, 214)",gray85:"rgb(217, 217, 217)",gray86:"rgb(219, 219, 219)",gray87:"rgb(222, 222, 222)",gray88:"rgb(224, 224, 224)",gray89:"rgb(227, 227, 227)",gray9:"rgb(23, 23, 23)",gray90:"rgb(229, 229, 229)",gray91:"rgb(232, 232, 232)",gray92:"rgb(235, 235, 235)",gray93:"rgb(237, 237, 237)",gray94:"rgb(240, 240, 240)",gray95:"rgb(242, 242, 242)",gray96:"rgb(245, 245, 245)",gray97:"rgb(247, 247, 247)",gray98:"rgb(250, 250, 250)",gray99:"rgb(252, 252, 252)",green:"rgb(0, 255, 0)",green1:"rgb(0, 255, 0)",green2:"rgb(0, 238, 0)",green3:"rgb(0, 205, 0)",green4:"rgb(0, 139, 0)",greenyellow:"rgb(173, 255, 47)",grey:"rgb(190, 190, 190)",grey0:"rgb(0, 0, 0)",grey1:"rgb(3, 3, 3)",grey10:"rgb(26, 26, 26)",grey100:"rgb(255, 255, 255)",grey11:"rgb(28, 28, 28)",grey12:"rgb(31, 31, 31)",grey13:"rgb(33, 33, 33)",grey14:"rgb(36, 36, 36)",grey15:"rgb(38, 38, 38)",grey16:"rgb(41, 41, 41)",grey17:"rgb(43, 43, 43)",grey18:"rgb(46, 46, 46)",grey19:"rgb(48, 48, 48)",grey2:"rgb(5, 5, 5)",grey20:"rgb(51, 51, 51)",grey21:"rgb(54, 54, 54)",grey22:"rgb(56, 56, 56)",grey23:"rgb(59, 59, 59)",grey24:"rgb(61, 61, 61)",grey25:"rgb(64, 64, 64)",grey26:"rgb(66, 66, 66)",grey27:"rgb(69, 69, 69)",grey28:"rgb(71, 71, 71)",grey29:"rgb(74, 74, 74)",grey3:"rgb(8, 8, 8)",grey30:"rgb(77, 77, 77)",grey31:"rgb(79, 79, 79)",grey32:"rgb(82, 82, 82)",grey33:"rgb(84, 84, 84)",grey34:"rgb(87, 87, 87)",grey35:"rgb(89, 89, 89)",grey36:"rgb(92, 92, 92)",grey37:"rgb(94, 94, 94)",grey38:"rgb(97, 97, 97)",grey39:"rgb(99, 99, 99)",grey4:"rgb(10, 10, 10)",grey40:"rgb(102, 102, 102)",grey41:"rgb(105, 105, 105)",grey42:"rgb(107, 107, 107)",grey43:"rgb(110, 110, 110)",grey44:"rgb(112, 112, 112)",grey45:"rgb(115, 115, 115)",grey46:"rgb(117, 117, 117)",grey47:"rgb(120, 120, 120)",grey48:"rgb(122, 122, 122)",grey49:"rgb(125, 125, 125)",grey5:"rgb(13, 13, 13)",grey50:"rgb(127, 127, 127)",grey51:"rgb(130, 130, 130)",grey52:"rgb(133, 133, 133)",grey53:"rgb(135, 135, 135)",grey54:"rgb(138, 138, 138)",grey55:"rgb(140, 140, 140)",grey56:"rgb(143, 143, 143)",grey57:"rgb(145, 145, 145)",grey58:"rgb(148, 148, 148)",grey59:"rgb(150, 150, 150)",grey6:"rgb(15, 15, 15)",grey60:"rgb(153, 153, 153)",grey61:"rgb(156, 156, 156)",grey62:"rgb(158, 158, 158)",grey63:"rgb(161, 161, 161)",grey64:"rgb(163, 163, 163)",grey65:"rgb(166, 166, 166)",grey66:"rgb(168, 168, 168)",grey67:"rgb(171, 171, 171)",grey68:"rgb(173, 173, 173)",grey69:"rgb(176, 176, 176)",grey7:"rgb(18, 18, 18)",grey70:"rgb(179, 179, 179)",grey71:"rgb(181, 181, 181)",grey72:"rgb(184, 184, 184)",grey73:"rgb(186, 186, 186)",grey74:"rgb(189, 189, 189)",grey75:"rgb(191, 191, 191)",grey76:"rgb(194, 194, 194)",grey77:"rgb(196, 196, 196)",grey78:"rgb(199, 199, 199)",grey79:"rgb(201, 201, 201)",grey8:"rgb(20, 20, 20)",grey80:"rgb(204, 204, 204)",grey81:"rgb(207, 207, 207)",grey82:"rgb(209, 209, 209)",grey83:"rgb(212, 212, 212)",grey84:"rgb(214, 214, 214)",grey85:"rgb(217, 217, 217)",grey86:"rgb(219, 219, 219)",grey87:"rgb(222, 222, 222)",grey88:"rgb(224, 224, 224)",grey89:"rgb(227, 227, 227)",grey9:"rgb(23, 23, 23)",grey90:"rgb(229, 229, 229)",grey91:"rgb(232, 232, 232)",grey92:"rgb(235, 235, 235)",grey93:"rgb(237, 237, 237)",grey94:"rgb(240, 240, 240)",grey95:"rgb(242, 242, 242)",grey96:"rgb(245, 245, 245)",grey97:"rgb(247, 247, 247)",grey98:"rgb(250, 250, 250)",grey99:"rgb(252, 252, 252)",honeydew:"rgb(240, 255, 240)",honeydew1:"rgb(240, 255, 240)",honeydew2:"rgb(224, 238, 224)",honeydew3:"rgb(193, 205, 193)",honeydew4:"rgb(131, 139, 131)",hotpink:"rgb(255, 105, 180)",hotpink1:"rgb(255, 110, 180)",hotpink2:"rgb(238, 106, 167)",hotpink3:"rgb(205, 96, 144)",hotpink4:"rgb(139, 58, 98)",indianred:"rgb(205, 92, 92)",indianred1:"rgb(255, 106, 106)",indianred2:"rgb(238, 99, 99)",indianred3:"rgb(205, 85, 85)",indianred4:"rgb(139, 58, 58)",ivory:"rgb(255, 255, 240)",ivory1:"rgb(255, 255, 240)",ivory2:"rgb(238, 238, 224)",ivory3:"rgb(205, 205, 193)",ivory4:"rgb(139, 139, 131)",khaki:"rgb(240, 230, 140)",khaki1:"rgb(255, 246, 143)",khaki2:"rgb(238, 230, 133)",khaki3:"rgb(205, 198, 115)",khaki4:"rgb(139, 134, 78)",lavender:"rgb(230, 230, 250)",lavenderblush:"rgb(255, 240, 245)",lavenderblush1:"rgb(255, 240, 245)",lavenderblush2:"rgb(238, 224, 229)",lavenderblush3:"rgb(205, 193, 197)",lavenderblush4:"rgb(139, 131, 134)",lawngreen:"rgb(124, 252, 0)",lemonchiffon:"rgb(255, 250, 205)",lemonchiffon1:"rgb(255, 250, 205)",lemonchiffon2:"rgb(238, 233, 191)",lemonchiffon3:"rgb(205, 201, 165)",lemonchiffon4:"rgb(139, 137, 112)",lightblue:"rgb(173, 216, 230)",lightblue1:"rgb(191, 239, 255)",lightblue2:"rgb(178, 223, 238)",lightblue3:"rgb(154, 192, 205)",lightblue4:"rgb(104, 131, 139)",lightcoral:"rgb(240, 128, 128)",lightcyan:"rgb(224, 255, 255)",lightcyan1:"rgb(224, 255, 255)",lightcyan2:"rgb(209, 238, 238)",lightcyan3:"rgb(180, 205, 205)",lightcyan4:"rgb(122, 139, 139)",lightgoldenrod:"rgb(238, 221, 130)",lightgoldenrod1:"rgb(255, 236, 139)",lightgoldenrod2:"rgb(238, 220, 130)",lightgoldenrod3:"rgb(205, 190, 112)",lightgoldenrod4:"rgb(139, 129, 76)",lightgoldenrodyellow:"rgb(250, 250, 210)",lightgray:"rgb(211, 211, 211)",lightgreen:"rgb(144, 238, 144)",lightgrey:"rgb(211, 211, 211)",lightpink:"rgb(255, 182, 193)",lightpink1:"rgb(255, 174, 185)",lightpink2:"rgb(238, 162, 173)",lightpink3:"rgb(205, 140, 149)",lightpink4:"rgb(139, 95, 101)",lightsalmon:"rgb(255, 160, 122)",lightsalmon1:"rgb(255, 160, 122)",lightsalmon2:"rgb(238, 149, 114)",lightsalmon3:"rgb(205, 129, 98)",lightsalmon4:"rgb(139, 87, 66)",lightseagreen:"rgb(32, 178, 170)",lightskyblue:"rgb(135, 206, 250)",lightskyblue1:"rgb(176, 226, 255)",lightskyblue2:"rgb(164, 211, 238)",lightskyblue3:"rgb(141, 182, 205)",lightskyblue4:"rgb(96, 123, 139)",lightslateblue:"rgb(132, 112, 255)",lightslategray:"rgb(119, 136, 153)",lightslategrey:"rgb(119, 136, 153)",lightsteelblue:"rgb(176, 196, 222)",lightsteelblue1:"rgb(202, 225, 255)",lightsteelblue2:"rgb(188, 210, 238)",lightsteelblue3:"rgb(162, 181, 205)",lightsteelblue4:"rgb(110, 123, 139)",lightyellow:"rgb(255, 255, 224)",lightyellow1:"rgb(255, 255, 224)",lightyellow2:"rgb(238, 238, 209)",lightyellow3:"rgb(205, 205, 180)",lightyellow4:"rgb(139, 139, 122)",limegreen:"rgb(50, 205, 50)",linen:"rgb(250, 240, 230)",magenta:"rgb(255, 0, 255)",magenta1:"rgb(255, 0, 255)",magenta2:"rgb(238, 0, 238)",magenta3:"rgb(205, 0, 205)",magenta4:"rgb(139, 0, 139)",maroon:"rgb(176, 48, 96)",maroon1:"rgb(255, 52, 179)",maroon2:"rgb(238, 48, 167)",maroon3:"rgb(205, 41, 144)",maroon4:"rgb(139, 28, 98)",mediumaquamarine:"rgb(102, 205, 170)",mediumblue:"rgb(0, 0, 205)",mediumorchid:"rgb(186, 85, 211)",mediumorchid1:"rgb(224, 102, 255)",mediumorchid2:"rgb(209, 95, 238)",mediumorchid3:"rgb(180, 82, 205)",mediumorchid4:"rgb(122, 55, 139)",mediumpurple:"rgb(147, 112, 219)",mediumpurple1:"rgb(171, 130, 255)",mediumpurple2:"rgb(159, 121, 238)",mediumpurple3:"rgb(137, 104, 205)",mediumpurple4:"rgb(93, 71, 139)",mediumseagreen:"rgb(60, 179, 113)",mediumslateblue:"rgb(123, 104, 238)",mediumspringgreen:"rgb(0, 250, 154)",mediumturquoise:"rgb(72, 209, 204)",mediumvioletred:"rgb(199, 21, 133)",midnightblue:"rgb(25, 25, 112)",mintcream:"rgb(245, 255, 250)",mistyrose:"rgb(255, 228, 225)",mistyrose1:"rgb(255, 228, 225)",mistyrose2:"rgb(238, 213, 210)",mistyrose3:"rgb(205, 183, 181)",mistyrose4:"rgb(139, 125, 123)",moccasin:"rgb(255, 228, 181)",navajowhite:"rgb(255, 222, 173)",navajowhite1:"rgb(255, 222, 173)",navajowhite2:"rgb(238, 207, 161)",navajowhite3:"rgb(205, 179, 139)",navajowhite4:"rgb(139, 121, 94)",navy:"rgb(0, 0, 128)",navyblue:"rgb(0, 0, 128)",oldlace:"rgb(253, 245, 230)",olivedrab:"rgb(107, 142, 35)",olivedrab1:"rgb(192, 255, 62)",olivedrab2:"rgb(179, 238, 58)",olivedrab3:"rgb(154, 205, 50)",olivedrab4:"rgb(105, 139, 34)",orange:"rgb(255, 165, 0)",orange1:"rgb(255, 165, 0)",orange2:"rgb(238, 154, 0)",orange3:"rgb(205, 133, 0)",orange4:"rgb(139, 90, 0)",orangered:"rgb(255, 69, 0)",orangered1:"rgb(255, 69, 0)",orangered2:"rgb(238, 64, 0)",orangered3:"rgb(205, 55, 0)",orangered4:"rgb(139, 37, 0)",orchid:"rgb(218, 112, 214)",orchid1:"rgb(255, 131, 250)",orchid2:"rgb(238, 122, 233)",orchid3:"rgb(205, 105, 201)",orchid4:"rgb(139, 71, 137)",palegoldenrod:"rgb(238, 232, 170)",palegreen:"rgb(152, 251, 152)",palegreen1:"rgb(154, 255, 154)",palegreen2:"rgb(144, 238, 144)",palegreen3:"rgb(124, 205, 124)",palegreen4:"rgb(84, 139, 84)",paleturquoise:"rgb(175, 238, 238)",paleturquoise1:"rgb(187, 255, 255)",paleturquoise2:"rgb(174, 238, 238)",paleturquoise3:"rgb(150, 205, 205)",paleturquoise4:"rgb(102, 139, 139)",palevioletred:"rgb(219, 112, 147)",palevioletred1:"rgb(255, 130, 171)",palevioletred2:"rgb(238, 121, 159)",palevioletred3:"rgb(205, 104, 137)",palevioletred4:"rgb(139, 71, 93)",papayawhip:"rgb(255, 239, 213)",peachpuff:"rgb(255, 218, 185)",peachpuff1:"rgb(255, 218, 185)",peachpuff2:"rgb(238, 203, 173)",peachpuff3:"rgb(205, 175, 149)",peachpuff4:"rgb(139, 119, 101)",peru:"rgb(205, 133, 63)",pink:"rgb(255, 192, 203)",pink1:"rgb(255, 181, 197)",pink2:"rgb(238, 169, 184)",pink3:"rgb(205, 145, 158)",pink4:"rgb(139, 99, 108)",plum:"rgb(221, 160, 221)",plum1:"rgb(255, 187, 255)",plum2:"rgb(238, 174, 238)",plum3:"rgb(205, 150, 205)",plum4:"rgb(139, 102, 139)",powderblue:"rgb(176, 224, 230)",purple:"rgb(160, 32, 240)",purple1:"rgb(155, 48, 255)",purple2:"rgb(145, 44, 238)",purple3:"rgb(125, 38, 205)",purple4:"rgb(85, 26, 139)",red:"rgb(255, 0, 0)",red1:"rgb(255, 0, 0)",red2:"rgb(238, 0, 0)",red3:"rgb(205, 0, 0)",red4:"rgb(139, 0, 0)",rosybrown:"rgb(188, 143, 143)",rosybrown1:"rgb(255, 193, 193)",rosybrown2:"rgb(238, 180, 180)",rosybrown3:"rgb(205, 155, 155)",rosybrown4:"rgb(139, 105, 105)",royalblue:"rgb(65, 105, 225)",royalblue1:"rgb(72, 118, 255)",royalblue2:"rgb(67, 110, 238)",royalblue3:"rgb(58, 95, 205)",royalblue4:"rgb(39, 64, 139)",saddlebrown:"rgb(139, 69, 19)",salmon:"rgb(250, 128, 114)",salmon1:"rgb(255, 140, 105)",salmon2:"rgb(238, 130, 98)",salmon3:"rgb(205, 112, 84)",salmon4:"rgb(139, 76, 57)",sandybrown:"rgb(244, 164, 96)",seagreen:"rgb(46, 139, 87)",seagreen1:"rgb(84, 255, 159)",seagreen2:"rgb(78, 238, 148)",seagreen3:"rgb(67, 205, 128)",seagreen4:"rgb(46, 139, 87)",seashell:"rgb(255, 245, 238)",seashell1:"rgb(255, 245, 238)",seashell2:"rgb(238, 229, 222)",seashell3:"rgb(205, 197, 191)",seashell4:"rgb(139, 134, 130)",sienna:"rgb(160, 82, 45)",sienna1:"rgb(255, 130, 71)",sienna2:"rgb(238, 121, 66)",sienna3:"rgb(205, 104, 57)",sienna4:"rgb(139, 71, 38)",skyblue:"rgb(135, 206, 235)",skyblue1:"rgb(135, 206, 255)",skyblue2:"rgb(126, 192, 238)",skyblue3:"rgb(108, 166, 205)",skyblue4:"rgb(74, 112, 139)",slateblue:"rgb(106, 90, 205)",slateblue1:"rgb(131, 111, 255)",slateblue2:"rgb(122, 103, 238)",slateblue3:"rgb(105, 89, 205)",slateblue4:"rgb(71, 60, 139)",slategray:"rgb(112, 128, 144)",slategray1:"rgb(198, 226, 255)",slategray2:"rgb(185, 211, 238)",slategray3:"rgb(159, 182, 205)",slategray4:"rgb(108, 123, 139)",slategrey:"rgb(112, 128, 144)",snow:"rgb(255, 250, 250)",snow1:"rgb(255, 250, 250)",snow2:"rgb(238, 233, 233)",snow3:"rgb(205, 201, 201)",snow4:"rgb(139, 137, 137)",springgreen:"rgb(0, 255, 127)",springgreen1:"rgb(0, 255, 127)",springgreen2:"rgb(0, 238, 118)",springgreen3:"rgb(0, 205, 102)",springgreen4:"rgb(0, 139, 69)",steelblue:"rgb(70, 130, 180)",steelblue1:"rgb(99, 184, 255)",steelblue2:"rgb(92, 172, 238)",steelblue3:"rgb(79, 148, 205)",steelblue4:"rgb(54, 100, 139)",tan:"rgb(210, 180, 140)",tan1:"rgb(255, 165, 79)",tan2:"rgb(238, 154, 73)",tan3:"rgb(205, 133, 63)",tan4:"rgb(139, 90, 43)",thistle:"rgb(216, 191, 216)",thistle1:"rgb(255, 225, 255)",thistle2:"rgb(238, 210, 238)",thistle3:"rgb(205, 181, 205)",thistle4:"rgb(139, 123, 139)",tomato:"rgb(255, 99, 71)",tomato1:"rgb(255, 99, 71)",tomato2:"rgb(238, 92, 66)",tomato3:"rgb(205, 79, 57)",tomato4:"rgb(139, 54, 38)",turquoise:"rgb(64, 224, 208)",turquoise1:"rgb(0, 245, 255)",turquoise2:"rgb(0, 229, 238)",turquoise3:"rgb(0, 197, 205)",turquoise4:"rgb(0, 134, 139)",violet:"rgb(238, 130, 238)",violetred:"rgb(208, 32, 144)",violetred1:"rgb(255, 62, 150)",violetred2:"rgb(238, 58, 140)",violetred3:"rgb(205, 50, 120)",violetred4:"rgb(139, 34, 82)",wheat:"rgb(245, 222, 179)",wheat1:"rgb(255, 231, 186)",wheat2:"rgb(238, 216, 174)",wheat3:"rgb(205, 186, 150)",wheat4:"rgb(139, 126, 102)",white:"rgb(255, 255, 255)",whitesmoke:"rgb(245, 245, 245)",yellow:"rgb(255, 255, 0)",yellow1:"rgb(255, 255, 0)",yellow2:"rgb(238, 238, 0)",yellow3:"rgb(205, 205, 0)",yellow4:"rgb(139, 139, 0)",yellowgreen:"rgb(154, 205, 50)"},lib.f={},lib.f.createEnum=function(e){return new String(e)},lib.f.replaceVars=function(e,i){return e.replace(/%([a-z]*)\(([^\)]+)\)/gi,function(e,r,t){if(void 0===i[t])throw"Unknown variable: "+t;t=i[t];if(r in lib.f.replaceVars.functions)t=lib.f.replaceVars.functions[r](t);else if(r)throw"Unknown escape function: "+r;return t})},lib.f.replaceVars.functions={encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escapeHTML:function(e){var r={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};return e.replace(/[<>&\"\']/g,function(e){return r[e]})}},lib.f.getAcceptLanguages=function(e){lib.f.getAcceptLanguages.chromeSupported()?chrome.i18n.getAcceptLanguages(e):setTimeout(function(){e([navigator.language.replace(/-/g,"_")])},0)},lib.f.getAcceptLanguages.chromeSupported=function(){return window.chrome&&chrome.i18n},lib.f.parseQuery=function(e){for(var r={},t=(e=e.startsWith("?")?e.substr(1):e).split("&"),i=0;i<t.length;i++){var n=t[i].split("="),o=decodeURIComponent(n[0]),n=decodeURIComponent(n[1]);o.endsWith("[]")?(r[o=o.slice(0,-2)]instanceof Array||(r[o]=[]),r[o].push(n)):r[o]=n}return r},lib.f.getURL=function(e){return lib.f.getURL.chromeSupported()?chrome.runtime.getURL(e):e},lib.f.getURL.chromeSupported=function(){return window.chrome&&chrome.runtime&&chrome.runtime.getURL},lib.f.clamp=function(e,r,t){return e<r?r:t<e?t:e},lib.f.zpad=function(e,r){return String(e).padStart(r,"0")},lib.f.getWhitespace=function(e){if(e<=0)return"";var r=this.getWhitespace;for(r.whitespace||(r.whitespace="          ");e>r.whitespace.length;)r.whitespace+=r.whitespace;return r.whitespace.substr(0,e)},lib.f.alarm=function(r,e){var t,i=e||5e3,n=lib.f.getStack(1);return t=setTimeout(function(){var e=(e="string"==typeof r?e:r.name)?": "+e:"";console.warn("lib.f.alarm: timeout expired: "+i/1e3+"s"+e),console.log(n),t=null},i),"string"==typeof r?o:o(r);function o(e){return function(){return t&&(clearTimeout(t),t=null),e.apply(null,arguments)}}},lib.f.getStack=function(e){var r,t=e?e+2:2;try{throw new Error}catch(e){r=e.stack.split("\n")}for(var i={},n=t;n<r.length;n++)i[n-t]=r[n].replace(/^\s*at\s+/,"");return i},lib.f.smartFloorDivide=function(e,r){e/=r,r=Math.ceil(e);return r-e<1e-4?r:Math.floor(e)},lib.f.randomInt=function(e,r){return Math.floor(Math.random()*(r-e+1))+e},lib.f.getOs=function(){if(window.browser&&browser.runtime&&browser.runtime.getPlatformInfo)return browser.runtime.getPlatformInfo().then(function(e){return e.os});if(window.chrome&&chrome.runtime&&chrome.runtime.getPlatformInfo)return new Promise(function(r,e){return chrome.runtime.getPlatformInfo(function(e){return r(e.os)})});if(window.navigator&&navigator.userAgent){navigator.userAgent;return Promise.resolve("windows")}return Promise.reject(null)},lib.f.getChromeMilestone=function(){if(window.navigator&&navigator.userAgent){var e=navigator.userAgent.match(/\sChrome\/(\d+)/);if(e)return parseInt(e[1])}return NaN},lib.f.lastError=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,r=void 0;return window.browser&&browser.runtime?r=browser.runtime.lastError:window.chrome&&chrome.runtime&&(r=chrome.runtime.lastError),r&&r.message?r.message:e},lib.MessageManager=function(e){this.languages_=e.map(function(e){return e.replace(/-/g,"_")}),-1==this.languages_.indexOf("en")&&this.languages_.unshift("en"),this.messages={}},lib.MessageManager.prototype.addMessages=function(t){for(var i in t){var e=t[i];e.placeholders?this.messages[i]=e.message.replace(/\$([a-z][^\s\$]+)\$/gi,function(e,r){return t[i].placeholders[r.toLowerCase()].content}):this.messages[i]=e.message}},lib.MessageManager.prototype.findAndLoadMessages=function(e,r){var t=this.languages_.concat(),i=[],n=[];function o(e){e?i=t.shift():n=t.shift(),t.length?s():r(i,n)}var s=function(){this.loadMessages(this.replaceReferences(e,t),o.bind(this,!0),o.bind(this,!1))}.bind(this);s()},lib.MessageManager.prototype.loadMessages=function(e,r,t){var i=this,n=new XMLHttpRequest;n.onload=function(){i.addMessages(JSON.parse(n.responseText)),r()},t&&(n.onerror=function(){return t(n)}),n.open("GET",e),n.send()},lib.MessageManager.replaceReferences=function(e,t){return e.replace(/\$(\d+)/g,function(e,r){return t[r-1]})},lib.MessageManager.prototype.replaceReferences=lib.MessageManager.replaceReferences,lib.MessageManager.prototype.get=function(e,r,t){var i;return e in this.messages?i=this.messages[e]:(i=window.chrome&&window.chrome.i18n?chrome.i18n.getMessage(e):i)||(console.warn("Unknown message: "+e),i=void 0===t?e:t,this.messages[e]=i),r?(r instanceof Array||(r=[r]),this.replaceReferences(i,r)):i},lib.MessageManager.prototype.processI18nAttributes=function(e){for(var r=e.querySelectorAll("[i18n]"),t=0;t<r.length;t++)this.processI18nAttribute(r[t])},lib.MessageManager.prototype.processI18nAttribute=function(r){var t=r.getAttribute("i18n");if(t){try{t=JSON.parse(t)}catch(e){throw console.error("Can't parse "+r.tagName+"#"+r.id+": "+t),e}for(var e in t){var i=e,n=t[e];(n=n.startsWith("=")?t[e=n.substr(1)]:n).startsWith("$")&&(n=(r.getAttribute(n.substr(1))+"_"+e).replace(/-/g,"_").toUpperCase());var o=this.get(n);"_"==i?r.textContent=o:r.setAttribute(i,o)}}},lib.PreferenceManager=function(e,r){this.storage=e,this.storageObserver_=this.onStorageChange_.bind(this),this.isActive_=!1,this.activate(),this.trace=!1;r=r||"/";r.endsWith("/")||(r+="/"),this.prefix=r,this.prefRecords_={},this.globalObservers_=[],this.childFactories_={},this.childLists_={}},lib.PreferenceManager.prototype.DEFAULT_VALUE=lib.f.createEnum("DEFAULT"),lib.PreferenceManager.Record=function(e,r){this.name=e,this.defaultValue=r,this.currentValue=this.DEFAULT_VALUE,this.observers=[]},lib.PreferenceManager.Record.prototype.DEFAULT_VALUE=lib.PreferenceManager.prototype.DEFAULT_VALUE,lib.PreferenceManager.Record.prototype.addObserver=function(e){this.observers.push(e)},lib.PreferenceManager.Record.prototype.removeObserver=function(e){e=this.observers.indexOf(e);0<=e&&this.observers.splice(e,1)},lib.PreferenceManager.Record.prototype.get=function(){return this.currentValue===this.DEFAULT_VALUE?!/^(string|number)$/.test(_typeof(this.defaultValue))&&"object"==_typeof(this.defaultValue)?JSON.parse(JSON.stringify(this.defaultValue)):this.defaultValue:this.currentValue},lib.PreferenceManager.prototype.deactivate=function(){if(!this.isActive_)throw new Error("Not activated");this.isActive_=!1,this.storage.removeObserver(this.storageObserver_)},lib.PreferenceManager.prototype.activate=function(){if(this.isActive_)throw new Error("Already activated");this.isActive_=!0,this.storage.addObserver(this.storageObserver_)},lib.PreferenceManager.prototype.readStorage=function(s){var r=this,a=0;function g(){0==--a&&s&&s()}var e=Object.keys(this.prefRecords_).map(function(e){return r.prefix+e});this.trace&&console.log("Preferences read: "+this.prefix),this.storage.getItems(e,function(e){var r,t=this.prefix.length;for(r in e){var i=e[r],n=r.substr(t),o=n in this.childLists_&&JSON.stringify(i)!=JSON.stringify(this.prefRecords_[n].currentValue);this.prefRecords_[n].currentValue=i,o&&(a++,this.syncChildList(n,g))}0==a&&s&&setTimeout(s)}.bind(this))},lib.PreferenceManager.prototype.definePreference=function(e,r,t){var i=this.prefRecords_[e];i?this.changeDefault(e,r):i=this.prefRecords_[e]=new lib.PreferenceManager.Record(e,r),t&&i.addObserver(t)},lib.PreferenceManager.prototype.definePreferences=function(e){for(var r=0;r<e.length;r++)this.definePreference(e[r][0],e[r][1],e[r][2])},lib.PreferenceManager.prototype.defineChildren=function(e,r){this.definePreference(e,[],this.onChildListChange_.bind(this,e)),this.childFactories_[e]=r,this.childLists_[e]={}},lib.PreferenceManager.prototype.addObservers=function(e,r){if(e&&"function"!=typeof e)throw new Error("Invalid param: globals");if(e&&this.globalObservers_.push(e),r)for(var t in r){if(!(t in this.prefRecords_))throw new Error("Unknown preference: "+t);this.prefRecords_[t].addObserver(r[t])}},lib.PreferenceManager.prototype.notifyAll=function(){for(var e in this.prefRecords_)this.notifyChange_(e)},lib.PreferenceManager.prototype.notifyChange_=function(e){var r=this.prefRecords_[e];if(!r)throw new Error("Unknown preference: "+e);for(var t=r.get(),i=0;i<this.globalObservers_.length;i++)this.globalObservers_[i](e,t);for(i=0;i<r.observers.length;i++)r.observers[i](t,e,this)},lib.PreferenceManager.prototype.createChild=function(e,r,t){var i,n=this.get(e);if(t){if(i=t,-1!=n.indexOf(i))throw new Error("Duplicate child: "+e+": "+i)}else for(;!i||-1!=n.indexOf(i);)i=lib.f.randomInt(1,65535).toString(16),i=lib.f.zpad(i,4),r&&(i=r+":"+i);t=this.childFactories_[e](this,i);return t.trace=this.trace,t.resetAll(),this.childLists_[e][i]=t,n.push(i),this.set(e,n),t},lib.PreferenceManager.prototype.removeChild=function(e,r){this.getChild(e,r).resetAll();var t=this.get(e),i=t.indexOf(r);-1!=i&&(t.splice(i,1),this.set(e,t)),delete this.childLists_[e][r]},lib.PreferenceManager.prototype.getChild=function(e,r,t){if(!(e in this.childLists_))throw new Error("Unknown child list: "+e);var i=this.childLists_[e];if(r in i)return i[r];if(void 0===t)throw new Error('Unknown "'+e+'" child: '+r);return t},lib.PreferenceManager.diffChildLists=function(e,r){for(var t={added:{},removed:{},common:{}},i=0;i<e.length;i++)-1!=r.indexOf(e[i])?t.common[e[i]]=!0:t.added[e[i]]=!0;for(i=0;i<r.length;i++)r[i]in t.added||r[i]in t.common||(t.removed[r[i]]=!0);return t},lib.PreferenceManager.prototype.syncChildList=function(e,r){var t=0;function i(){0==--t&&r&&r()}for(var n=this.get(e),o=Object.keys(this.childLists_[e]),s=(lib.PreferenceManager.diffChildLists(n,o),0);s<n.length;s++){var a=n[s],g=o.indexOf(a);0<=g&&o.splice(g,1),this.childLists_[e][a]||((g=this.childFactories_[e](this,a))?(g.trace=this.trace,this.childLists_[e][a]=g,t++,g.readStorage(i)):console.warn("Unable to restore child: "+e+": "+a))}for(s=0;s<o.length;s++)delete this.childLists_[e][o[s]];!t&&r&&setTimeout(r)},lib.PreferenceManager.prototype.reset=function(e){var r=this.prefRecords_[e];if(!r)throw new Error("Unknown preference: "+e);this.storage.removeItem(this.prefix+e),r.currentValue!==this.DEFAULT_VALUE&&(r.currentValue=this.DEFAULT_VALUE,this.notifyChange_(e))},lib.PreferenceManager.prototype.resetAll=function(){var e,r,t=[];for(e in this.childLists_){var i,n=this.childLists_[e];for(i in n)n[i].resetAll()}for(r in this.prefRecords_)this.prefRecords_[r].currentValue!==this.DEFAULT_VALUE&&(this.prefRecords_[r].currentValue=this.DEFAULT_VALUE,t.push(r));var o=Object.keys(this.prefRecords_).map(function(e){return this.prefix+e}.bind(this));this.storage.removeItems(o),t.forEach(this.notifyChange_.bind(this))},lib.PreferenceManager.prototype.diff=function(e,r){return(void 0===e?"undefined":_typeof(e))!==(void 0===r?"undefined":_typeof(r))||!/^(undefined|boolean|number|string)$/.test(void 0===e?"undefined":_typeof(e))||e!==r},lib.PreferenceManager.prototype.changeDefault=function(e,r){var t=this.prefRecords_[e];if(!t)throw new Error("Unknown preference: "+e);this.diff(t.defaultValue,r)&&(t.currentValue===this.DEFAULT_VALUE?(t.defaultValue=r,this.notifyChange_(e)):t.defaultValue=r)},lib.PreferenceManager.prototype.changeDefaults=function(e){for(var r in e)this.changeDefault(r,e[r])},lib.PreferenceManager.prototype.set=function(e,r){var t=this.prefRecords_[e];if(!t)throw new Error("Unknown preference: "+e);var i=t.get();this.diff(i,r)&&(this.diff(t.defaultValue,r)?(t.currentValue=r,this.storage.setItem(this.prefix+e,r)):(t.currentValue=this.DEFAULT_VALUE,this.storage.removeItem(this.prefix+e)),setTimeout(this.notifyChange_.bind(this,e),0))},lib.PreferenceManager.prototype.get=function(e){var r=this.prefRecords_[e];if(!r)throw new Error("Unknown preference: "+e);return r.get()},lib.PreferenceManager.prototype.exportAsJson=function(){var e,r={};for(e in this.prefRecords_)if(e in this.childLists_){r[e]=[];for(var t=this.get(e),i=0;i<t.length;i++){var n=t[i];r[e].push({id:n,json:this.getChild(e,n).exportAsJson()})}}else{var o=this.prefRecords_[e];o.currentValue!=this.DEFAULT_VALUE&&(r[e]=o.currentValue)}return r},lib.PreferenceManager.prototype.importFromJson=function(e,r){function t(){--n<1&&r&&r()}var i,n=0;for(i in e)if(i in this.childLists_)for(var o=e[i],s=0;s<o.length;s++){var a=o[s].id;(this.childLists_[i][a]||this.createChild(i,null,a)).importFromJson(o[s].json,t),n++}else this.set(i,e[i]);0==n&&r&&r()},lib.PreferenceManager.prototype.onChildListChange_=function(e){this.syncChildList(e)},lib.PreferenceManager.prototype.onStorageChange_=function(e){for(var r in e){var t,i,n;this.prefix&&0!=r.lastIndexOf(this.prefix,0)||(t=r.substr(this.prefix.length))in this.prefRecords_&&(i=this.prefRecords_[t],n=e[r].newValue,(r=i.currentValue)===i.DEFAULT_VALUE&&(r=void 0),this.diff(r,n)&&(i.currentValue=null==n?i.DEFAULT_VALUE:n,this.notifyChange_(t)))}},lib.resource={resources_:{}},lib.resource.add=function(e,r,t){lib.resource.resources_[e]={type:r,name:e,data:t}},lib.resource.get=function(e,r){if(e in lib.resource.resources_)return lib.resource.resources_[e];if(void 0===r)throw"Unknown resource: "+e;return r},lib.resource.getData=function(e,r){if(e in lib.resource.resources_)return lib.resource.resources_[e].data;if(void 0===r)throw"Unknown resource: "+e;return r},lib.resource.getDataUrl=function(e,r){r=lib.resource.get(e,r);return"data:"+r.type+","+r.data},lib.Storage=new Object,lib.Storage.Chrome=function(e){this.storage_=e,this.observers_=[],chrome.storage.onChanged.addListener(this.onChanged_.bind(this))},lib.Storage.Chrome.prototype.onChanged_=function(e,r){if(chrome.storage[r]==this.storage_)for(var t=0;t<this.observers_.length;t++)this.observers_[t](e)},lib.Storage.Chrome.prototype.addObserver=function(e){this.observers_.push(e)},lib.Storage.Chrome.prototype.removeObserver=function(e){e=this.observers_.indexOf(e);-1!=e&&this.observers_.splice(e,1)},lib.Storage.Chrome.prototype.clear=function(e){this.storage_.clear(),e&&setTimeout(e,0)},lib.Storage.Chrome.prototype.getItem=function(e,r){this.storage_.get(e,r)},lib.Storage.Chrome.prototype.getItems=function(e,r){this.storage_.get(e,r)},lib.Storage.Chrome.prototype.setItem=function(r,t,i){function n(){var e=lib.f.lastError();if(e){if(e.indexOf("MAX_WRITE_OPERATIONS"))return console.warn("Will retry save of "+r+" after exceeding quota: "+e),void setTimeout(function(){return o.setItem(r,t,n)},1e3);console.error("Unknown runtime error: "+e)}i&&i()}var o=this,e={};e[r]=t,this.storage_.set(e,n)},lib.Storage.Chrome.prototype.setItems=function(e,r){this.storage_.set(e,r)},lib.Storage.Chrome.prototype.removeItem=function(e,r){this.storage_.remove(e,r)},lib.Storage.Chrome.prototype.removeItems=function(e,r){this.storage_.remove(e,r)},lib.Storage.Local=function(){this.observers_=[],this.storage_=window.localStorage,window.addEventListener("storage",this.onStorage_.bind(this))},lib.Storage.Local.prototype.onStorage_=function(e){if(e.storageArea==this.storage_){var r=e.oldValue&&JSON.parse(e.oldValue),t=e.newValue&&JSON.parse(e.newValue),i={};i[e.key]={oldValue:r,newValue:t};for(var n=0;n<this.observers_.length;n++)this.observers_[n](i)}},lib.Storage.Local.prototype.addObserver=function(e){this.observers_.push(e)},lib.Storage.Local.prototype.removeObserver=function(e){e=this.observers_.indexOf(e);-1!=e&&this.observers_.splice(e,1)},lib.Storage.Local.prototype.clear=function(e){this.storage_.clear(),e&&setTimeout(e,0)},lib.Storage.Local.prototype.getItem=function(e,r){var t=this.storage_.getItem(e);if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}setTimeout(r.bind(null,t),0)},lib.Storage.Local.prototype.getItems=function(e,r){for(var t={},i=e.length-1;0<=i;i--){var n=e[i],o=this.storage_.getItem(n);if("string"==typeof o)try{t[n]=JSON.parse(o)}catch(e){t[n]=o}else e.splice(i,1)}setTimeout(r.bind(null,t),0)},lib.Storage.Local.prototype.setItem=function(e,r,t){this.storage_.setItem(e,JSON.stringify(r)),t&&setTimeout(t,0)},lib.Storage.Local.prototype.setItems=function(e,r){for(var t in e)this.storage_.setItem(t,JSON.stringify(e[t]));r&&setTimeout(r,0)},lib.Storage.Local.prototype.removeItem=function(e,r){this.storage_.removeItem(e),r&&setTimeout(r,0)},lib.Storage.Local.prototype.removeItems=function(e,r){for(var t=0;t<e.length;t++)this.storage_.removeItem(e[t]);r&&setTimeout(r,0)},lib.Storage.Memory=function(){this.observers_=[],this.storage_={}},lib.Storage.Memory.prototype.addObserver=function(e){this.observers_.push(e)},lib.Storage.Memory.prototype.removeObserver=function(e){e=this.observers_.indexOf(e);-1!=e&&this.observers_.splice(e,1)},lib.Storage.Memory.prototype.clear=function(e){var r,t={};for(r in this.storage_)t[r]={oldValue:this.storage_[r],newValue:void 0};this.storage_={},setTimeout(function(){for(var e=0;e<this.observers_.length;e++)this.observers_[e](t)}.bind(this),0),e&&setTimeout(e,0)},lib.Storage.Memory.prototype.getItem=function(e,r){var t=this.storage_[e];if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}setTimeout(r.bind(null,t),0)},lib.Storage.Memory.prototype.getItems=function(e,r){for(var t={},i=e.length-1;0<=i;i--){var n=e[i],o=this.storage_[n];if("string"==typeof o)try{t[n]=JSON.parse(o)}catch(e){t[n]=o}else e.splice(i,1)}setTimeout(r.bind(null,t),0)},lib.Storage.Memory.prototype.setItem=function(e,r,t){var i=this.storage_[e];this.storage_[e]=JSON.stringify(r);var n={};n[e]={oldValue:i,newValue:r},setTimeout(function(){for(var e=0;e<this.observers_.length;e++)this.observers_[e](n)}.bind(this),0),t&&setTimeout(t,0)},lib.Storage.Memory.prototype.setItems=function(e,r){var t,i={};for(t in e)i[t]={oldValue:this.storage_[t],newValue:e[t]},this.storage_[t]=JSON.stringify(e[t]);setTimeout(function(){for(var e=0;e<this.observers_.length;e++)this.observers_[e](i)}.bind(this)),r&&setTimeout(r,0)},lib.Storage.Memory.prototype.removeItem=function(e,r){delete this.storage_[e],r&&setTimeout(r,0)},lib.Storage.Memory.prototype.removeItems=function(e,r){for(var t=0;t<e.length;t++)delete this.storage_[e[t]];r&&setTimeout(r,0)},lib.TestManager=function(e){this.log=e||new lib.TestManager.Log},lib.TestManager.prototype.createTestRun=function(e){return new lib.TestManager.TestRun(this,e)},lib.TestManager.prototype.onTestRunComplete=function(e){},lib.TestManager.prototype.testPreamble=function(e,r){},lib.TestManager.prototype.testPostamble=function(e,r){},lib.TestManager.Log=function(){var o=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:console;this.save=!1,this.data="",this.prefix_="",this.prefixStack_=0,this.console_=e,["log","debug","info","warn","error"].forEach(function(e){var i="";switch(e){case"debug":case"warn":case"error":i=e.toUpperCase()+": "}var n=o.console_[e];o[e]=o.console_[e]=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];o.save&&(o.data+=o.prefix_+i+r.join(" ")+"\n"),n.apply(o.console_,r)}}),["group","groupCollapsed"].forEach(function(e){var r=o.console_[e];o[e]=o.console_[e]=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";r(e),o.save&&(o.data+=o.prefix_+e+"\n"),o.prefix_="  ".repeat(++o.prefixStack_)}});var r=this.console_.groupEnd;this.groupEnd=this.console_.groupEnd=function(){r(),o.prefixStack_&&(o.prefix_="  ".repeat(--o.prefixStack_))}},lib.TestManager.Suite=function(t){function e(e,r){this.testManager_=e,this.suiteName=t,this.setup(r)}return e.suiteName=t,e.addTest=lib.TestManager.Suite.addTest,e.disableTest=lib.TestManager.Suite.disableTest,e.getTest=lib.TestManager.Suite.getTest,e.getTestList=lib.TestManager.Suite.getTestList,e.testList_=[],e.testMap_={},e.prototype=Object.create(lib.TestManager.Suite.prototype),e.constructor=lib.TestManager.Suite,lib.TestManager.Suite.subclasses.push(e),e},lib.TestManager.Suite.subclasses=[],lib.TestManager.Suite.addTest=function(e,r){if(e in this.testMap_)throw"Duplicate test name: "+e;r=new lib.TestManager.Test(this,e,r);this.testMap_[e]=r,this.testList_.push(r)},lib.TestManager.Suite.disableTest=function(e,r){if(e in this.testMap_)throw"Duplicate test name: "+e;r=new lib.TestManager.Test(this,e,r);console.log("Disabled test: "+r.fullName)},lib.TestManager.Suite.getTest=function(e){return this.testMap_[e]},lib.TestManager.Suite.getTestList=function(){return this.testList_},lib.TestManager.Suite.prototype.setDefaults=function(e,r){for(var t in r)this[t]=(t in e?e:r)[t]},lib.TestManager.Suite.prototype.setup=function(e){},lib.TestManager.Suite.prototype.preamble=function(e,r){},lib.TestManager.Suite.prototype.postamble=function(e,r){},lib.TestManager.Test=function(e,r,t){this.suiteClass=e,this.testName=r,this.fullName=e.suiteName+"["+r+"]",this.testFunction_=t},lib.TestManager.Test.prototype.run=function(r){try{this.testFunction_.apply(r.suite,[r,r.testRun.cx])}catch(e){if(e instanceof lib.TestManager.Result.TestComplete)return;r.println("Test raised an exception: "+e),e.stack&&(e.stack instanceof Array?r.println(e.stack.join("\n")):r.println(e.stack)),r.completeTest_(r.FAILED,!1)}},lib.TestManager.TestRun=function(e,r){this.testManager=e,this.log=e.log,this.cx=r||{},this.failures=[],this.passes=[],this.startDate=null,this.duration=null,this.currentResult=null,this.maxFailures=0,this.panic=!1,this.testQueue_=[]},lib.TestManager.TestRun.prototype.ALL_TESTS=lib.f.createEnum("<all-tests>"),lib.TestManager.TestRun.prototype.selectTest=function(e){this.testQueue_.push(e)},lib.TestManager.TestRun.prototype.selectSuite=function(e,r){for(var t=r||this.ALL_TESTS,i=0,n=e.getTestList(),o=0;o<n.length;o++){var s=n[o];if(t!==this.ALL_TESTS)if(t instanceof RegExp){if(!t.test(s.testName))continue}else if(s.testName!=t)continue;this.selectTest(s),i++}return i},lib.TestManager.TestRun.prototype.selectPattern=function(e){for(var r=0,t=0;t<lib.TestManager.Suite.subclasses.length;t++)r+=this.selectSuite(lib.TestManager.Suite.subclasses[t],e);return r||this.log.warn("No tests matched selection criteria: "+e),r},lib.TestManager.TestRun.prototype.onUncaughtException_=function(e,r,t){if(0==e.indexOf("Uncaught lib.TestManager.Result.TestComplete")||-1!=e.indexOf("status: passed"))return!0;if(this.currentResult&&e!="Uncaught "+this.currentResult.expectedErrorMessage_){var i="during";return this.currentResult.status!=this.currentResult.PENDING&&(i="after"),this.log.error("Uncaught exception "+i+" test case: "+this.currentResult.test.fullName),this.log.error(e+", "+r+":"+t),this.currentResult.completeTest_(this.currentResult.FAILED,!1),!1}},lib.TestManager.TestRun.prototype.onTestRunComplete_=function(e){e?(this.duration=new Date-this.startDate,this.log.groupEnd(),this.log.info(this.passes.length+" passed, "+this.failures.length+" failed, "+this.msToSeconds_(this.duration)),this.summarize(),window.onerror=null,this.testManager.onTestRunComplete(this)):setTimeout(this.onTestRunComplete_.bind(this),0,!0)},lib.TestManager.TestRun.prototype.onResultComplete=function(e){try{this.testManager.testPostamble(e,this.cx),e.suite.postamble(e,this.ctx)}catch(e){this.log.error("Unexpected exception in postamble: "+(e.stack||e)),this.panic=!0}if(e.status!=e.PASSED?this.log.error(e.status):500<e.duration&&this.log.warn("Slow test took "+this.msToSeconds_(e.duration)),this.log.groupEnd(),e.status==e.FAILED)this.failures.push(e),this.currentSuite=null;else{if(e.status!=e.PASSED)return this.log.error("Unknown result status: "+e.test.fullName+": "+e.status),void(this.panic=!0);this.passes.push(e)}this.runNextTest_()},lib.TestManager.TestRun.prototype.onResultReComplete=function(e,r){this.log.error("Late complete for test: "+e.test.fullName+": "+r);r=this.passes.indexOf(e);0<=r&&(this.passes.splice(r,1),this.failures.push(e))},lib.TestManager.TestRun.prototype.runNextTest_=function(){if(!this.panic&&this.testQueue_.length){if(this.maxFailures&&this.failures.length>=this.maxFailures)return this.log.error("Maximum failure count reached, aborting test run."),void this.onTestRunComplete_();var e=this.testQueue_[0],r=this.currentResult?this.currentResult.suite:null;try{r&&r instanceof e.suiteClass||(r&&this.log.groupEnd(),this.log.group(e.suiteClass.suiteName),r=new e.suiteClass(this.testManager,this.cx))}catch(e){return this.log.error("Exception during setup: "+(e.stack||e)),this.panic=!0,void this.onTestRunComplete_()}try{this.log.group(e.testName),this.currentResult=new lib.TestManager.Result(this,r,e),this.testManager.testPreamble(this.currentResult,this.cx),r.preamble(this.currentResult,this.cx),this.testQueue_.shift()}catch(e){return this.log.error("Unexpected exception during test preamble: "+(e.stack||e)),this.log.groupEnd(),this.panic=!0,void this.onTestRunComplete_()}try{this.currentResult.run()}catch(e){this.log.error("Unexpected exception during test run: "+(e.stack||e)),this.panic=!0}}else this.onTestRunComplete_()},lib.TestManager.TestRun.prototype.run=function(){this.log.info("Running "+this.testQueue_.length+" test(s)"),window.onerror=this.onUncaughtException_.bind(this),this.startDate=new Date,this.runNextTest_()},lib.TestManager.TestRun.prototype.msToSeconds_=function(e){return(e/1e3).toFixed(2)+"s"},lib.TestManager.TestRun.prototype.summarize=function(){if(this.failures.length)for(var e=0;e<this.failures.length;e++)this.log.error("FAILED: "+this.failures[e].test.fullName);this.testQueue_.length&&this.log.warn("Test run incomplete: "+this.testQueue_.length+" test(s) were not run.")},lib.TestManager.Result=function(e,r,t){this.testRun=e,this.suite=r,this.test=t,this.startDate=null,this.duration=null,this.status=this.PENDING,this.expectedErrorMessage_=null},lib.TestManager.Result.prototype.PENDING="pending",lib.TestManager.Result.prototype.FAILED="FAILED",lib.TestManager.Result.prototype.PASSED="passed",lib.TestManager.Result.TestComplete=function(e){this.result=e},lib.TestManager.Result.TestComplete.prototype.toString=function(){return"lib.TestManager.Result.TestComplete: "+this.result.test.fullName+", status: "+this.result.status},lib.TestManager.Result.prototype.run=function(){this.startDate=new Date,this.test.run(this),this.status!=this.PENDING||this.timeout_||(this.println("Test did not return a value and did not request more time."),this.completeTest_(this.FAILED,!1))},lib.TestManager.Result.prototype.expectErrorMessage=function(e){this.expectedErrorMessage_=e},lib.TestManager.Result.prototype.onTimeout_=function(){this.timeout_=null,this.status==this.PENDING&&(this.println("Test timed out."),this.completeTest_(this.FAILED,!1))},lib.TestManager.Result.prototype.requestTime=function(e){this.timeout_&&clearTimeout(this.timeout_),this.timeout_=setTimeout(this.onTimeout_.bind(this),e)},lib.TestManager.Result.prototype.completeTest_=function(e,r){if(this.status==this.PENDING?(this.duration=new Date-this.startDate,this.status=e,this.testRun.onResultComplete(this)):this.testRun.onResultReComplete(this,e),arguments.length<2||r)throw new lib.TestManager.Result.TestComplete(this)},lib.TestManager.Result.prototype.assertEQ=function(e,r,t){function i(e){if("number"==typeof e)return e;e=String(e).split("\n").map(function(e){return JSON.stringify(e)});return 1<e.length?"\n"+e.join("\n"):e.join("\n")}e!==r&&(r instanceof Array&&lib.array.compare(e,r)||(t=t?"["+t+"]":"",this.fail("assertEQ"+t+": "+this.getCallerLocation_(1)+": "+i(e)+" !== "+i(r))))},lib.TestManager.Result.prototype.assert=function(e,r){!0!==e&&(r=r?"["+r+"]":"",this.fail("assert"+r+": "+this.getCallerLocation_(1)+": "+String(e)))},lib.TestManager.Result.prototype.getCallerLocation_=function(r){try{throw new Error}catch(e){r=e.stack.split("\n")[r+2].match(/([^/]+:\d+):\d+\)?$/);return r?r[1]:"???"}},lib.TestManager.Result.prototype.println=function(e){this.testRun.log.info(e)},lib.TestManager.Result.prototype.fail=function(e){arguments.length&&this.println(e),this.completeTest_(this.FAILED,!0)},lib.TestManager.Result.prototype.pass=function(){this.completeTest_(this.PASSED,!0)},lib.UTF8Decoder=function(){this.bytesLeft=0,this.codePoint=0,this.lowerBound=0},lib.UTF8Decoder.prototype.decode=function(e){for(var r="",t=0;t<e.length;t++){var i=e.charCodeAt(t);0==this.bytesLeft?i<=127?r+=e.charAt(t):192<=i&&i<=223?(this.codePoint=i-192,this.bytesLeft=1,this.lowerBound=128):224<=i&&i<=239?(this.codePoint=i-224,this.bytesLeft=2,this.lowerBound=2048):240<=i&&i<=247?(this.codePoint=i-240,this.bytesLeft=3,this.lowerBound=65536):248<=i&&i<=251?(this.codePoint=i-248,this.bytesLeft=4,this.lowerBound=2097152):252<=i&&i<=253?(this.codePoint=i-252,this.bytesLeft=5,this.lowerBound=67108864):r+="":128<=i&&i<=191?(this.bytesLeft--,this.codePoint=(this.codePoint<<6)+(i-128),0==this.bytesLeft&&((i=this.codePoint)<this.lowerBound||55296<=i&&i<=57343||1114111<i?r+="":i<65536?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296+(i>>>10&1023),56320+(1023&i))))):(r+="",this.bytesLeft=0,t--)}return r},lib.decodeUTF8=function(e){return(new lib.UTF8Decoder).decode(e)},lib.encodeUTF8=function(e){for(var r="",t=0;t<e.length;t++){var i,n,o=e.charCodeAt(t);if(56320<=o&&o<=57343?o=65533:55296<=o&&o<=56319&&(t+1<e.length&&56320<=(i=e.charCodeAt(t+1))&&i<=57343?(o=65536+((1023&o)<<10)+(1023&i),t++):o=65533),o<=127)r+=e.charAt(t);else for(n=o<=2047?(r+=String.fromCharCode(192|o>>>6),1):o<=65535?(r+=String.fromCharCode(224|o>>>12),2):(r+=String.fromCharCode(240|o>>>18),3);0<n;)n--,r+=String.fromCharCode(128|o>>>6*n&63)}return r},lib.wc={},lib.wc.nulWidth=0,lib.wc.controlWidth=0,lib.wc.regardCjkAmbiguous=!1,lib.wc.cjkAmbiguousWidth=2,lib.wc.combining=[[173,173],[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1756],[1759,1764],[1767,1768],[1770,1773],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2260,2273],[2275,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43452],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531],[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70090,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70460,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[72193,72198],[72201,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[92912,92916],[92976,92982],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],lib.wc.ambiguous=[[161,161],[164,164],[167,168],[170,170],[173,174],[176,180],[182,186],[188,191],[198,198],[208,208],[215,216],[222,225],[230,230],[232,234],[236,237],[240,240],[242,243],[247,250],[252,252],[254,254],[257,257],[273,273],[275,275],[283,283],[294,295],[299,299],[305,307],[312,312],[319,322],[324,324],[328,331],[333,333],[338,339],[358,359],[363,363],[462,462],[464,464],[466,466],[468,468],[470,470],[472,472],[474,474],[476,476],[593,593],[609,609],[708,708],[711,711],[713,715],[717,717],[720,720],[728,731],[733,733],[735,735],[768,879],[913,929],[931,937],[945,961],[963,969],[1025,1025],[1040,1103],[1105,1105],[4352,4447],[8208,8208],[8211,8214],[8216,8217],[8220,8221],[8224,8226],[8228,8231],[8240,8240],[8242,8243],[8245,8245],[8251,8251],[8254,8254],[8308,8308],[8319,8319],[8321,8324],[8364,8364],[8451,8451],[8453,8453],[8457,8457],[8467,8467],[8470,8470],[8481,8482],[8486,8486],[8491,8491],[8531,8532],[8539,8542],[8544,8555],[8560,8569],[8585,8585],[8592,8601],[8632,8633],[8658,8658],[8660,8660],[8679,8679],[8704,8704],[8706,8707],[8711,8712],[8715,8715],[8719,8719],[8721,8721],[8725,8725],[8730,8730],[8733,8736],[8739,8739],[8741,8741],[8743,8748],[8750,8750],[8756,8759],[8764,8765],[8776,8776],[8780,8780],[8786,8786],[8800,8801],[8804,8807],[8810,8811],[8814,8815],[8834,8835],[8838,8839],[8853,8853],[8857,8857],[8869,8869],[8895,8895],[8978,8978],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9312,9449],[9451,9547],[9552,9587],[9600,9615],[9618,9621],[9632,9633],[9635,9641],[9650,9651],[9654,9655],[9660,9661],[9664,9665],[9670,9672],[9675,9675],[9678,9681],[9698,9701],[9711,9711],[9725,9726],[9733,9734],[9737,9737],[9742,9743],[9748,9749],[9756,9756],[9758,9758],[9792,9792],[9794,9794],[9800,9811],[9824,9825],[9827,9829],[9831,9834],[9836,9837],[9839,9839],[9855,9855],[9875,9875],[9886,9887],[9889,9889],[9898,9899],[9917,9919],[9924,9953],[9955,9955],[9960,9983],[9989,9989],[9994,9995],[10024,10024],[10045,10045],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10102,10111],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11097],[11904,12255],[12272,12350],[12352,19903],[19968,42191],[43360,43391],[44032,55203],[57344,64255],[65024,65049],[65072,65135],[65281,65376],[65504,65510],[65533,65533],[94176,94177],[94208,101119],[110592,110895],[110960,111359],[126980,126980],[127183,127183],[127232,127242],[127248,127277],[127280,127337],[127344,127404],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128747,128748],[128756,128760],[129296,129342],[129344,129356],[129360,129387],[129408,129431],[129472,129472],[129488,129510],[131072,196605],[196608,262141],[917760,917999],[983040,1048573],[1048576,1114109]],lib.wc.unambiguous=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,12255],[12272,12350],[12352,12871],[12880,19903],[19968,42191],[43360,43391],[44032,55203],[63744,64255],[65040,65049],[65072,65135],[65281,65376],[65504,65510],[94176,94177],[94208,101119],[110592,110895],[110960,111359],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128747,128748],[128756,128760],[129296,129342],[129344,129356],[129360,129387],[129408,129431],[129472,129472],[129488,129510],[131072,196605],[196608,262141]],lib.wc.binaryTableSearch_=function(e,r){var t,i=0,n=r.length-1;if(e<r[i][0]||e>r[n][1])return!1;for(;i<=n;)if(e>r[t=Math.floor((i+n)/2)][1])i=t+1;else{if(!(e<r[t][0]))return!0;n=t-1}return!1},lib.wc.isSpace=function(e){return lib.wc.binaryTableSearch_(e,lib.wc.combining)},lib.wc.isCjkAmbiguous=function(e){return lib.wc.binaryTableSearch_(e,lib.wc.ambiguous)},lib.wc.charWidth=function(e){return lib.wc.regardCjkAmbiguous?lib.wc.charWidthRegardAmbiguous(e):lib.wc.charWidthDisregardAmbiguous(e)},lib.wc.charWidthDisregardAmbiguous=function(e){return e<127?32<=e?1:0==e?lib.wc.nulWidth:lib.wc.controlWidth:e<160?lib.wc.controlWidth:lib.wc.isSpace(e)?0:lib.wc.binaryTableSearch_(e,lib.wc.unambiguous)?2:1},lib.wc.charWidthRegardAmbiguous=function(e){return lib.wc.isCjkAmbiguous(e)?lib.wc.cjkAmbiguousWidth:lib.wc.charWidthDisregardAmbiguous(e)},lib.wc.strWidth=function(e){for(var r=0,t=0;t<e.length;){var i,n=e.codePointAt(t);if((i=lib.wc.charWidth(n))<0)return-1;r+=i,t+=n<=65535?1:2}return r},lib.wc.substr=function(e,r,t){var i,n,o=0;if(r)for(n=0;o<e.length;){var s=e.codePointAt(o);if(r<(n+=lib.wc.charWidth(s)))break;o+=s<=65535?1:2}if(null==t)return e.substr(o);for(i=o,n=0;i<e.length;){var a=e.codePointAt(i);if(t<(n+=lib.wc.charWidth(a)))break;i+=a<=65535?1:2}return e.substring(o,i)},lib.wc.substring=function(e,r,t){return lib.wc.substr(e,r,t-r)},lib.resource.add("libdot/changelog/version","text/plain","1.21"),lib.resource.add("libdot/changelog/date","text/plain","2018-01-05");